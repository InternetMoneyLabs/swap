const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/realWorldTradingService-CHhmuxSv.js","assets/vendor-Gm9i_4Ku.js","assets/bitcoin-DG-Uutyh.js"])))=>i.map(i=>d[i]);
var Lr=Object.defineProperty;var Or=(n,e,r)=>e in n?Lr(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r;var I=(n,e,r)=>Or(n,typeof e!="symbol"?e+"":e,r);import{r as g,a as Ir,R as Mr,b as _r}from"./vendor-Gm9i_4Ku.js";import{b as Ur}from"./bitcoin-DG-Uutyh.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var Ht={exports:{}},Fe={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qr=g,Wr=Symbol.for("react.element"),Dr=Symbol.for("react.fragment"),zr=Object.prototype.hasOwnProperty,Hr=qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vr={key:!0,ref:!0,__self:!0,__source:!0};function Vt(n,e,r){var s,a={},o=null,i=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(i=e.ref);for(s in e)zr.call(e,s)&&!Vr.hasOwnProperty(s)&&(a[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)a[s]===void 0&&(a[s]=e[s]);return{$$typeof:Wr,type:n,key:o,ref:i,props:a,_owner:Hr.current}}Fe.Fragment=Dr;Fe.jsx=Vt;Fe.jsxs=Vt;Ht.exports=Fe;var t=Ht.exports,He={},gt=Ir;He.createRoot=gt.createRoot,He.hydrateRoot=gt.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ne(){return Ne=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},Ne.apply(this,arguments)}var G;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(G||(G={}));const xt="popstate";function Kr(n){n===void 0&&(n={});function e(s,a){let{pathname:o,search:i,hash:l}=s.location;return Ve("",{pathname:o,search:i,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:Xt(a)}return Jr(e,r,null,n)}function V(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Kt(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch(err){}}}function Xr(){return Math.random().toString(36).substr(2,8)}function yt(n,e){return{usr:n.state,key:n.key,idx:e}}function Ve(n,e,r,s){return r===void 0&&(r=null),Ne({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Pe(e):e,{state:r,key:e&&e.key||s||Xr()})}function Xt(n){let{pathname:e="/",search:r="",hash:s=""}=n;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Pe(n){let e={};if(n){let r=n.indexOf("#");r>=0&&(e.hash=n.substr(r),n=n.substr(0,r));let s=n.indexOf("?");s>=0&&(e.search=n.substr(s),n=n.substr(0,s)),n&&(e.pathname=n)}return e}function Jr(n,e,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:o=!1}=s,i=a.history,l=G.Pop,c=null,u=d();u==null&&(u=0,i.replaceState(Ne({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function h(){l=G.Pop;let y=d(),A=y==null?null:y-u;u=y,c&&c({action:l,location:m.location,delta:A})}function f(y,A){l=G.Push;let P=Ve(m.location,y,A);u=d()+1;let S=yt(P,u),C=m.createHref(P);try{i.pushState(S,"",C)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;a.location.assign(C)}o&&c&&c({action:l,location:m.location,delta:1})}function v(y,A){l=G.Replace;let P=Ve(m.location,y,A);u=d();let S=yt(P,u),C=m.createHref(P);i.replaceState(S,"",C),o&&c&&c({action:l,location:m.location,delta:0})}function x(y){let A=a.location.origin!=="null"?a.location.origin:a.location.href,P=typeof y=="string"?y:Xt(y);return P=P.replace(/ $/,"%20"),V(A,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,A)}let m={get action(){return l},get location(){return n(a,i)},listen(y){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(xt,h),c=y,()=>{a.removeEventListener(xt,h),c=null}},createHref(y){return e(a,y)},createURL:x,encodeLocation(y){let A=x(y);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:f,replace:v,go(y){return i.go(y)}};return m}var bt;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(bt||(bt={}));function Yr(n,e,r){return r===void 0&&(r="/"),Gr(n,e,r)}function Gr(n,e,r,s){let a=typeof e=="string"?Pe(e):e,o=Gt(a.pathname||"/",r);if(o==null)return null;let i=Jt(n);Qr(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=ds(o);l=is(i[c],u)}return l}function Jt(n,e,r,s){e===void 0&&(e=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(V(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=ie([s,c.relativePath]),d=r.concat(c);o.children&&o.children.length>0&&(V(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Jt(o.children,e,d,u)),!(o.path==null&&!o.index)&&e.push({path:u,score:as(u,o.index),routesMeta:d})};return n.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))a(o,i);else for(let c of Yt(o.path))a(o,i,c)}),e}function Yt(n){let e=n.split("/");if(e.length===0)return[];let[r,...s]=e,a=r.endsWith("?"),o=r.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let i=Yt(s.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),a&&l.push(...i),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function Qr(n){n.sort((e,r)=>e.score!==r.score?r.score-e.score:os(e.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const Zr=/^:[\w-]+$/,es=3,ts=2,rs=1,ss=10,ns=-2,wt=n=>n==="*";function as(n,e){let r=n.split("/"),s=r.length;return r.some(wt)&&(s+=ns),e&&(s+=ts),r.filter(a=>!wt(a)).reduce((a,o)=>a+(Zr.test(o)?es:o===""?rs:ss),s)}function os(n,e){return n.length===e.length&&n.slice(0,-1).every((s,a)=>s===e[a])?n[n.length-1]-e[e.length-1]:0}function is(n,e,r){let{routesMeta:s}=n,a={},o="/",i=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=o==="/"?e:e.slice(o.length)||"/",h=ls({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h)return null;Object.assign(a,h.params),i.push({params:a,pathname:ie([o,h.pathname]),pathnameBase:us(ie([o,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(o=ie([o,h.pathnameBase]))}return i}function ls(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[r,s]=cs(n.path,n.caseSensitive,n.end),a=e.match(r);if(!a)return null;let o=a[0],i=o.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:s.reduce((u,d,h)=>{let{paramName:f,isOptional:v}=d;if(f==="*"){let m=l[h]||"";i=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const x=l[h];return v&&!x?u[f]=void 0:u[f]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:i,pattern:n}}function cs(n,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Kt(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let s=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function ds(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kt(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Gt(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,s=n.charAt(r);return s&&s!=="/"?null:n.slice(r)||"/"}const ie=n=>n.join("/").replace(/\/\/+/g,"/"),us=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/");function hs(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Qt=["post","put","patch","delete"];new Set(Qt);const ms=["get",...Qt];new Set(ms);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Se(){return Se=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},Se.apply(this,arguments)}const fs=g.createContext(null),ps=g.createContext(null),Zt=g.createContext(null),$e=g.createContext(null),Ee=g.createContext({outlet:null,matches:[],isDataRoute:!1}),er=g.createContext(null);function it(){return g.useContext($e)!=null}function gs(){return it()||V(!1),g.useContext($e).location}function xs(n,e){return ys(n,e)}function ys(n,e,r,s){it()||V(!1);let{navigator:a}=g.useContext(Zt),{matches:o}=g.useContext(Ee),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let u=gs(),d;if(e){var h;let y=typeof e=="string"?Pe(e):e;c==="/"||(h=y.pathname)!=null&&h.startsWith(c)||V(!1),d=y}else d=u;let f=d.pathname||"/",v=f;if(c!=="/"){let y=c.replace(/^\//,"").split("/");v="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let x=Yr(n,{pathname:v}),m=js(x&&x.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:ie([c,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:ie([c,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,r,s);return e&&m?g.createElement($e.Provider,{value:{location:Se({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:G.Pop}},m):m}function bs(){let n=Rs(),e=hs(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),r=n instanceof Error?n.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),r?g.createElement("pre",{style:a},r):null,null)}const ws=g.createElement(bs,null);class vs extends g.Component{constructor(e){console.log("[TRACE] constructor in index-5JuZi7QJ.js");super(e);this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?g.createElement(Ee.Provider,{value:this.props.routeContext},g.createElement(er.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ks(n){let{routeContext:e,match:r,children:s}=n,a=g.useContext(fs);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),g.createElement(Ee.Provider,{value:e},s)}function js(n,e,r,s){var a;if(e===void 0&&(e=[]),r===void 0&&(r=null),s===void 0&&(s=null),n==null){var o;if(!r)return null;if(r.errors)n=r.matches;else if((o=s)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)n=r.matches;else return null}let i=n,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=i.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||V(!1),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,u=-1;if(r&&s&&s.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:v}=r,x=h.route.loader&&f[h.route.id]===void 0&&(!v||v[h.route.id]===void 0);if(h.route.lazy||x){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,h,f)=>{let v,x=!1,m=null,y=null;r&&(v=l&&h.route.id?l[h.route.id]:void 0,m=h.route.errorElement||ws,c&&(u<0&&f===0?(As("route-fallback"),x=!0,y=null):u===f&&(x=!0,y=h.route.hydrateFallbackElement||null)));let A=e.concat(i.slice(0,f+1)),P=()=>{let S;return v?S=m:x?S=y:h.route.Component?S=g.createElement(h.route.Component,null):h.route.element?S=h.route.element:S=d,g.createElement(ks,{match:h,routeContext:{outlet:d,matches:A,isDataRoute:r!=null},children:S})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?g.createElement(vs,{location:r.location,revalidation:r.revalidation,component:m,error:v,children:P(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):P()},null)}var tr=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(tr||{});function Ns(n){let e=g.useContext(ps);return e||V(!1),e}function Ss(n){let e=g.useContext(Ee);return e||V(!1),e}function Cs(n){let e=Ss(),r=e.matches[e.matches.length-1];return r.route.id||V(!1),r.route.id}function Rs(){var n;let e=g.useContext(er),r=Ns(tr.UseRouteError),s=Cs();return e!==void 0?e:(n=r.errors)==null?void 0:n[s]}const vt={};function As(n,e,r){vt[n]||(vt[n]=!0)}function Fs(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function me(n){V(!1)}function Ps(n){let{basename:e="/",children:r=null,location:s,navigationType:a=G.Pop,navigator:o,static:i=!1,future:l}=n;it()&&V(!1);let c=e.replace(/^\/*/,"/"),u=g.useMemo(()=>({basename:c,navigator:o,static:i,future:Se({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof s=="string"&&(s=Pe(s));let{pathname:d="/",search:h="",hash:f="",state:v=null,key:x="default"}=s,m=g.useMemo(()=>{let y=Gt(d,c);return y==null?null:{location:{pathname:y,search:h,hash:f,state:v,key:x},navigationType:a}},[c,d,h,f,v,x,a]);return m==null?null:g.createElement(Zt.Provider,{value:u},g.createElement($e.Provider,{children:r,value:m}))}function $s(n){let{children:e,location:r}=n;return xs(Ke(e),r)}new Promise(()=>{});function Ke(n,e){e===void 0&&(e=[]);let r=[];return g.Children.forEach(n,(s,a)=>{if(!g.isValidElement(s))return;let o=[...e,a];if(s.type===g.Fragment){r.push.apply(r,Ke(s.props.children,o));return}s.type!==me&&V(!1),!s.props.index||!s.props.children||V(!1);let i={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(i.children=Ke(s.props.children,o)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Es="6";try{window.__reactRouterVersion=Es}catch(e){}const Bs="startTransition",kt=Mr[Bs];function Ts(n){let{basename:e,children:r,future:s,window:a}=n,o=g.useRef();o.current==null&&(o.current=Kr({window:a,v5Compat:!0}));let i=o.current,[l,c]=g.useState({action:i.action,location:i.location}),{v7_startTransition:u}=s||{},d=g.useCallback(h=>{u&&kt?kt(()=>c(h)):c(h)},[c,u]);return g.useLayoutEffect(()=>i.listen(d),[i,d]),g.useEffect(()=>Fs(s),[s]),g.createElement(Ps,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:i,future:s})}var jt;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(jt||(jt={}));var Nt;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Nt||(Nt={}));const rr=g.createContext(void 0),sr=()=>{const n=g.useContext(rr);if(!n)throw new Error("useTheme must be used within a ThemeProvider");return n},Ls=({children:n})=>{const[e,r]=g.useState("light");g.useEffect(()=>{console.log("[TRACE] useEffect in index-5JuZi7QJ.js");const o=localStorage.getItem("fractal-swap-theme"),i=window.matchMedia("(prefers-color-scheme: dark)").matches;o?r(o):i&&r("dark")},[]),g.useEffect(()=>{const o=window.document.documentElement;o.classList.remove("light","dark"),o.classList.add(e),localStorage.setItem("fractal-swap-theme",e)},[e]);const a={theme:e,toggleTheme:()=>{r(o=>o==="light"?"dark":"light")}};return t.jsx(rr.Provider,{value:a,children:n})},nr=g.createContext(void 0),lt=()=>{const n=g.useContext(nr);if(!n)throw new Error("useNetwork must be used within a NetworkProvider");return n},ue=[{name:"Fractal Bitcoin Testnet",type:"fractal_testnet",apiBase:"https://open-api-fractal.unisat.io",swapApi:"https://api-proxy.ddpurse.com",explorer:"https://explorer-fractal-testnet.unisat.io"},{name:"Fractal Bitcoin Mainnet",type:"fractal_mainnet",apiBase:"https://open-api-fractal.unisat.io",swapApi:"https://api-proxy.ddpurse.com",explorer:"https://explorer-fractal.unisat.io"}],Os=({children:n})=>{const[e,r]=g.useState(ue[0]),[s,a]=g.useState(null),[o,i]=g.useState([]);g.useEffect(()=>{const f="fractal_mainnet",v=ue.find(x=>x.type===f)||ue[0];r(v),l()},[]);const l=async()=>{const f=[{id:"layer-1",name:"Base Layer",level:1,status:"active",blockHeight:15e4,anchored:!0,congestion:"low",feeRate:1},{id:"layer-2.1",name:"Layer 2.1",level:2,status:"active",blockHeight:149950,anchored:!0,congestion:"medium",feeRate:2},{id:"layer-2.2",name:"Layer 2.2",level:2,status:"syncing",blockHeight:149900,anchored:!1,congestion:"high",feeRate:5}];i(f),a(f[0])},h={currentNetwork:e,availableNetworks:ue,currentLayer:s,availableLayers:o,switchNetwork:f=>{const v=ue.find(x=>x.type===f);v&&(r(v),l())},switchLayer:f=>{const v=o.find(x=>x.id===f);v&&a(v)},refreshLayers:async()=>{await l()}};return t.jsx(nr.Provider,{value:h,children:n})},Z=class Z{constructor(){I(this,"baseUrl");I(this,"network");I(this,"runesCache",new Map);I(this,"marketDataCache",new Map);I(this,"lastUpdate",new Map);I(this,"cacheTimeout",3e4);this.network="mainnet",this.baseUrl=this.network==="mainnet"?"https://open-api-fractal.unisat.io":"https://open-api-fractal-testnet.unisat.io"}static getInstance(){return Z.instance||(Z.instance=new Z),Z.instance}async getRunesBalances(e){console.log("[TRACE] async method in index-5JuZi7QJ.js");try{const r=`balances_${e}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}`,s=this.lastUpdate.get(r)||0;if(Date.now()-s<this.cacheTimeout&&this.runesCache.has(r))return this.runesCache.get(r);const a=await fetch(`${this.baseUrl}/v1/indexer/address/${e}/runes/balance-list`,{headers:{Accept:"application/json"}});if(!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const o=await a.json();if(o.code!==0)throw new Error(`API Error: ${o.msg}`);const i=o.data.detail||[];return this.runesCache.set(r,i),this.lastUpdate.set(r,Date.now()),console.log(`Fetched ${i.length} Runes balances for ${e}`),i}catch(r){console.error("Failed to fetch Runes balances:",r);const s=`balances_${e}`;return this.runesCache.has(s)?(console.warn("Returning stale cached data due to API error"),this.runesCache.get(s)):[]}}}async getRuneInfo(e){try{const r=await fetch(`${this.baseUrl}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}/v1/indexer/runes/${e}/info`,{headers:{Accept:"application/json"}});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const s=await r.json();if(s.code!==0)throw new Error(`API Error: ${s.msg}`);return s.data}catch(r){return console.error(`Failed to fetch Rune info for ${e}:`,r),null}}async getRuneMarketData(e){try{const r=`market_${e}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}`,s=this.lastUpdate.get(r)||0;if(Date.now()-s<this.cacheTimeout&&this.marketDataCache.has(r))return this.marketDataCache.get(r);const a=await fetch(`${this.baseUrl}/v1/indexer/runes/${e}/market`,{headers:{Accept:"application/json"}});let o;if(a.ok){const i=await a.json();if(i.code===0)o=i.data;else{const l=await this.getRuneInfo(e);o={rune:(l==null?void 0:l.rune)||e,runeid:e,holders:(l==null?void 0:l.holders)||0}}}else{const i=await this.getRuneInfo(e);o={rune:(i==null?void 0:i.rune)||e,runeid:e,holders:(i==null?void 0:i.holders)||0}}return this.marketDataCache.set(r,o),this.lastUpdate.set(r,Date.now()),o}catch(r){return console.error(`Failed to fetch market data for ${e}:`,r),null}}async getTopRunes(e=50){var r;try{console.log(`🔄 Fetching top ${e}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);} Runes from market...`);const s=await fetch(`${this.baseUrl}/v1/indexer/runes/info-list?start=0&limit=${e}`,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);const a=await s.json();if(a.code!==0||!((r=a.data)!=null&&r.detail))return console.warn("No top runes data available"),[];const o=a.data.detail.map(i=>{var l;return{rune:i.spacedRune||i.rune,runeid:i.runeid||((l=i.number)==null?void 0:l.toString())||i.spacedRune,spacedRune:i.spacedRune||i.rune,amount:"0",symbol:i.symbol||"",divisibility:i.divisibility||0}});return console.log(`✅ Loaded ${o.length} top market Runes`),o}catch(s){return console.error("Failed to fetch top Runes:",s),[]}}async getAllRunes(e=100,r=0){try{const s=await fetch(`${this.baseUrl}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}/v1/indexer/runes/list?limit=${e}&offset=${r}`,{headers:{Accept:"application/json"}});if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);const a=await s.json();if(a.code!==0)throw new Error(`API Error: ${a.msg}`);return a.data.detail||[]}catch(s){return console.error("Failed to fetch all Runes:",s),[]}}formatRuneAmount(e,r){const s=BigInt(e),a=BigInt(10**r);if(r===0)return s.toString();const o=s/a,i=s%a;if(i===0n)return o.toString();const c=i.toString().padStart(r,"0").replace(/0+$/,"");return`${o}.${c}`}parseRuneAmount(e,r){if(r===0)return e;const[s="0",a=""]=e.split("."),o=a.padEnd(r,"0").slice(0,r),i=BigInt(s)*BigInt(10**r),l=BigInt(o);return(i+l).toString()}getFormattedBalance(e){return this.formatRuneAmount(e.amount,e.divisibility)}clearBalanceCache(e){const r=`balances_${e}`;this.runesCache.delete(r),this.lastUpdate.delete(r)}clearAllCaches(){this.runesCache.clear(),this.marketDataCache.clear(),this.lastUpdate.clear()}getNetworkInfo(){return{network:this.network,baseUrl:this.baseUrl}}};I(Z,"instance");let Ce=Z;class Is{constructor(){I(this,"currentWallet",null);I(this,"requiredNetwork","fractal_mainnet")}async getAvailableWallets(){await this.waitForWalletExtensions();const e=[];return typeof window.unisat<"u"?e.push({name:"UniSat",icon:"/icons/unisat.png",installed:!0,connector:window.unisat}):e.push({name:"UniSat",icon:"/icons/unisat.png",installed:!1,connector:null}),typeof window.okxwallet<"u"?e.push({name:"OKX",icon:"/icons/okx.png",installed:!0,connector:window.okxwallet}):e.push({name:"OKX",icon:"/icons/okx.png",installed:!1,connector:null}),e}async waitForWalletExtensions(e=3e3){const r=Date.now(),s=100;return new Promise(a=>{const o=()=>{const i=Date.now()-r,l=typeof window.unisat<"u",c=typeof window.okxwallet<"u";if(l||c||i>=e){console.log(`🔍 Wallet detection completed after ${i}ms`),console.log(`UniSat: ${l?"✅ Available":"❌ Not found"}`),console.log(`OKX: ${c?"✅ Available":"❌ Not found"}`),a();return}setTimeout(o,s)};o()})}async connect(e){let r;switch(e.toLowerCase()){case"unisat":if(!window.unisat)throw new Error("UniSat wallet not installed");r=window.unisat;break;case"okx":if(!window.okxwallet)throw new Error("OKX wallet not installed");r=window.okxwallet;break;default:throw new Error(`Unsupported wallet: ${e}`)}try{console.log(`🔗 Connecting to ${e}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);} wallet...`);try{await this.checkAndSwitchNetwork(r,e)}catch(l){console.warn("Network check failed, but proceeding with connection:",l.message)}const s=await r.requestAccounts();if(!s||s.length===0)throw new Error("No accounts found");const a=s[0];let o="";try{o=await r.getPublicKey()}catch(l){console.warn("Could not get public key:",l)}const i=await this.getWalletBalance(r,a);return this.currentWallet=e.toLowerCase(),console.log(`✅ Successfully connected to ${e}`),console.log(`Address: ${a}`),console.log(`Balance: ${i}`),{address:a,publicKey:o,balance:i}}catch(s){throw console.error("Wallet connection failed:",s),new Error(`Failed to connect to ${e}: ${s.message}`)}}async checkAndSwitchNetwork(e,r){try{console.log(`🔍 Checking network for ${r}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}...`),console.log(`Required network: ${this.requiredNetwork}`);let s=null;try{if(e.getNetwork?(s=await e.getNetwork(),console.log("wallet.getNetwork() returned:",s)):e.getChain?(s=await e.getChain(),console.log("wallet.getChain() returned:",s)):console.log("Wallet has no getNetwork() or getChain() method"),r.toLowerCase()==="unisat")try{if(e.getChainType){const a=await e.getChainType();console.log("UniSat getChainType():",a)}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}if(e.getBitcoinNetwork){const a=await e.getBitcoinNetwork();console.log("UniSat getBitcoinNetwork():",a)}}catch(err){console.log("UniSat-specific network methods not available")}}catch(a){console.warn("Could not detect current network:",a),console.log("⚠️ Network detection failed, proceeding with connection...");return}if(this.requiredNetwork==="fractal_mainnet"){const a=this.isOnBitcoinMainnet(s);if(a){console.log("✅ Wallet is on Bitcoin mainnet (compatible with Fractal Bitcoin)");return}const o=this.isOnTestnet(s);if(o)throw console.log("❌ Wallet is on testnet, but we need mainnet"),new Error(`Please switch your ${r} wallet from testnet to mainnet`);console.log("⚠️ Could not clearly determine network, proceeding with connection..."),console.log("Network detection result - mainnet:",a,"testnet:",o);return}}catch(s){if(console.error("Network check failed:",s),s.message.includes("testnet")||s.message.includes("switch"))throw s;console.log("⚠️ Network check inconclusive, proceeding with connection...")}}isOnBitcoinMainnet(e){return e?[e==="livenet",e==="mainnet",e.network==="livenet",e.network==="mainnet",e.chainId==="bitcoin-mainnet",e.name==="Bitcoin Mainnet",e==="BITCOIN_MAINNET",e.type==="mainnet"].some(s=>s===!0):!1}isOnTestnet(e){return e?[e==="testnet",e.network==="testnet",e.chainId==="bitcoin-testnet",e.name==="Bitcoin Testnet",e==="BITCOIN_TESTNET",e.type==="testnet",e==="fractal-testnet",e.chainId==="fractal-testnet"].some(s=>s===!0):!1}isCorrectNetwork(e,r){return e?[e.chainId===r.chainId,e.network===r.chainId,e.name===r.networkName,e===r.chainId].some(a=>a===!0):!1}async requestNetworkSwitch(e,r,s){try{if(r.toLowerCase()==="unisat")await this.switchUnisatNetwork(e,s);else if(r.toLowerCase()==="okx")await this.switchOKXNetwork(e,s);else throw new Error("Network switching not supported for this wallet");console.log(`✅ Successfully switched to ${s.networkName}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}`)}catch(a){throw console.error("Network switch failed:",a),new Error(`Failed to switch to ${s.networkName}. Please switch manually in your wallet.`)}}async switchUnisatNetwork(e,r){if(e.switchNetwork)await e.switchNetwork(r.chainId);else if(e.switchChain)await e.switchChain(r.chainId);else throw new Error(`Please manually switch UniSat to ${r.networkName}`)}async switchOKXNetwork(e,r){if(e.bitcoin&&e.bitcoin.switchNetwork)await e.bitcoin.switchNetwork(r.chainId);else throw new Error(`Please manually switch OKX to ${r.networkName}`)}async getCurrentNetwork(){const e=this.getCurrentWallet();if(!e)return null;try{let r=null;return e.getNetwork?r=await e.getNetwork():e.getChain&&(r=await e.getChain()),r?this.isOnBitcoinMainnet(r)?"bitcoin-mainnet":this.isOnTestnet(r)?"bitcoin-testnet":typeof r=="string"?r:JSON.stringify(r):null}catch(r){return console.warn("Could not get current network:",r),null}}async getRunesBalances(e){try{console.log(`🔍 Fetching live Runes balances for address: ${e}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}`);const r=Ce.getInstance(),s=await r.getRunesBalances(e),a={};return s.forEach(o=>{const i=r.getFormattedBalance(o),l=parseFloat(i);o.runeid&&(a[o.runeid]=l),o.spacedRune&&(a[o.spacedRune]=l),o.symbol&&o.symbol!==o.spacedRune&&(a[o.symbol]=l),console.log(`✅ Live Rune: ${o.spacedRune} (${o.runeid}) - Balance: ${i} ${o.symbol||""}`)}),console.log(`📊 Total Runes found: ${s.length}`),a}catch(r){return console.error("❌ Failed to fetch live Runes balances:",r),{}}}async getRuneBalance(e,r){try{return(await this.getRunesBalances(e))[r]||0}catch(s){return console.error(`Failed to get balance for rune ${r}:`,s),0}}async debugRunesBalanceAPI(e){const r="https://open-api-fractal.unisat.io";console.log("🔧 DEBUG: Testing Runes balance API endpoints..."),console.log("Address:",e),console.log("API Base:",r);const s=[`/v1/indexer/address/${e}/runes/balance-list`,`/v1/indexer/address/${e}/runes`,`/v1/indexer/address/${e}/balance-list`,`/v1/indexer/runes/address/${e}/balance`,`/v1/indexer/runes/balance/${e}`,`/v1/indexer/address/${e}/runes-balance`,`/v1/indexer/address/${e}/assets`,`/v1/indexer/address/${e}/tokens`];for(const a of s)try{console.log(`
🔍 Testing: ${r}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}${a}`);const o=await fetch(`${r}${a}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(console.log(`Status: ${o.status} ${o.statusText}`),o.ok){const i=await o.json();if(console.log("✅ SUCCESS - Response structure:",{code:i.code,message:i.message,dataKeys:i.data?Object.keys(i.data):"no data",dataType:typeof i.data,sampleData:i.data}),i.data){const l=i.data.detail||i.data.list||i.data;if(Array.isArray(l)){console.log(`Found ${l.length} items in response`);const c=l.find(u=>{const d=u.spacedRune||u.rune||u.name||u.tick||"";return d.toLowerCase().includes("black")&&d.toLowerCase().includes("myth")});c?console.log("🎯 FOUND black•myth•sun•wu•kong:",c):console.log("Sample items:",l.slice(0,3))}}}else{const i=await o.text();console.log("❌ FAILED - Error:",i)}}catch(o){console.log("❌ FAILED - Exception:",o.message)}try{console.log(`
🔍 Testing general address info: ${r}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}/v1/indexer/address/${e}`);const a=await fetch(`${r}/v1/indexer/address/${e}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(a.ok){const o=await a.json();console.log("✅ Address info:",o)}}catch(a){console.log("❌ Address info failed:",a.message)}}async disconnect(){this.currentWallet=null}async isConnected(){if(!this.currentWallet)return!1;try{const e=this.getCurrentWallet();if(!e)return!1;const r=await e.getAccounts();return r&&r.length>0}catch(err){return!1}}async getAccount(){const e=this.getCurrentWallet();if(!e)throw new Error("No wallet connected");const r=await e.getAccounts();if(!r||r.length===0)throw new Error("No accounts found");const s=r[0];let a="";try{a=await e.getPublicKey()}catch(i){console.warn("Could not get public key:",i)}const o=await this.getWalletBalance(e,s);return{address:s,publicKey:a,balance:o}}async getBalance(){const e=this.getCurrentWallet();if(!e)throw new Error("No wallet connected");const r=await e.getAccounts();if(!r||r.length===0)throw new Error("No accounts found");return await this.getWalletBalance(e,r[0])}async signPSBT(e){const r=this.getCurrentWallet();if(!r)throw new Error("No wallet connected");try{return await r.signPsbt(e)}catch(s){throw console.error("PSBT signing failed:",s),new Error(`Failed to sign transaction: ${s}`)}}async signMessage(e){const r=this.getCurrentWallet();if(!r)throw new Error("No wallet connected");try{let s;return this.currentWallet==="unisat"&&r.signMessage?s=await r.signMessage(e):this.currentWallet==="okx"&&r.signMessage?s=await r.signMessage(e):r.signMessage?s=await r.signMessage(e):(s=`demo_signature_${(await this.getAccount()).address}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}_${Date.now()}`,console.warn("Using demo signature - implement proper message signing")),s}catch(s){throw console.error("Message signing failed:",s),new Error(`Failed to sign message: ${s}`)}}getCurrentWallet(){if(!this.currentWallet)return null;switch(this.currentWallet){case"unisat":return window.unisat;case"okx":return window.okxwallet;default:return null}}async getWalletBalance(e,r){try{return this.requiredNetwork==="fractal_mainnet"?await this.getFractalBitcoinBalance(r):(await e.getBalance()).confirmed||0}catch(s){return console.warn("Could not get balance:",s),0}}async getFractalBitcoinBalance(e){try{const r="https://open-api-fractal.unisat.io";console.log(`🔍 Fetching FB balance for address: ${e}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}`);const s=await fetch(`${r}/v1/indexer/address/${e}/balance`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!s.ok)throw new Error(`Balance API failed: ${s.status}`);const a=await s.json();if(console.log("Fractal Bitcoin balance response:",a),a.code===0&&a.data){const o=a.data.satoshi||a.data.confirmed||0,i=o/1e8;return console.log(`✅ FB Balance: ${i} FB (${o} satoshis)`),i}return console.warn("Unexpected balance response format:",a),0}catch(r){console.error("Failed to fetch Fractal Bitcoin balance:",r);try{const s=this.getCurrentWallet();if(s){const a=await s.getBalance();return console.warn("⚠️ Using wallet balance (might be BTC, not FB):",a),a.confirmed||0}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}}catch(s){console.error("Fallback balance fetch also failed:",s)}return 0}}formatAddress(e,r=8){return e?e.length<=r*2?e:`${e.slice(0,r)}...${e.slice(-r)}`:""}isValidBitcoinAddress(e){return[/^[13][a-km-zA-HJ-NP-Z1-9]{25,34}$/,/^3[a-km-zA-HJ-NP-Z1-9]{25,34}$/,/^bc1[a-z0-9]{39,59}$/,/^tb1[a-z0-9]{39,59}$/,/^fb1[a-z0-9]{39,59}$/].some(s=>s.test(e))}getNetworkDisplayName(){return this.requiredNetwork==="fractal_mainnet"?"Fractal Bitcoin Mainnet":"Fractal Bitcoin Testnet"}}const D=new Is,Ms=Object.freeze(Object.defineProperty({__proto__:null,walletService:D},Symbol.toStringTag,{value:"Module"})),ar=g.createContext(void 0),ae=()=>{const n=g.useContext(ar);if(!n)throw new Error("useWallet must be used within a WalletProvider");return n},_s=({children:n})=>{const[e,r]=g.useState(null),[s,a]=g.useState(!1),[o,i]=g.useState([]),[l,c]=g.useState(null),[u,d]=g.useState({}),h=D.getNetworkDisplayName();g.useEffect(()=>{const C=async()=>{try{console.log("🔄 Initializing wallet detection...");const $=await D.getAvailableWallets();if(i($),console.log("✅ Wallet detection completed:",$.map(R=>`${R.name}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}: ${R.installed?"installed":"not installed"}`)),await D.isConnected()){const R=await D.getAccount();r(R);const j=await D.getCurrentNetwork();c(j)}}catch($){console.warn("Wallet initialization failed:",$),i([{name:"UniSat",icon:"/icons/unisat.png",installed:!1,connector:null},{name:"OKX",icon:"/icons/okx.png",installed:!1,connector:null}])}},N=()=>{var $,b,R,j;typeof window<"u"&&(window.addEventListener("unisat_accountsChanged",B=>{console.log("UniSat accounts changed:",B.detail),B.detail&&B.detail.length===0&&v()}),window.addEventListener("unisat_networkChanged",B=>{console.log("UniSat network changed:",B.detail),A()}),window.okxwallet&&((b=($=window.okxwallet).on)==null||b.call($,"accountsChanged",B=>{console.log("OKX accounts changed:",B),B.length===0&&v()}),(j=(R=window.okxwallet).on)==null||j.call(R,"networkChanged",B=>{console.log("OKX network changed:",B),A()})),window.addEventListener("ethereum#initialized",()=>{console.log("Wallet extension initialized"),setTimeout(async()=>{const B=await D.getAvailableWallets();i(B)},500)}))};return C(),N(),()=>{typeof window<"u"&&(window.removeEventListener("unisat_accountsChanged",()=>{}),window.removeEventListener("unisat_networkChanged",()=>{}),window.removeEventListener("ethereum#initialized",()=>{}))}},[]);const f=async C=>{a(!0);try{const N=await D.connect(C);r(N);const $=await D.getCurrentNetwork();c($),await x(N.address)}catch(N){throw console.error("Failed to connect wallet:",N),N}finally{a(!1)}},v=()=>{D.disconnect(),r(null),c(null),d({})},x=async C=>{try{const N=C||(e==null?void 0:e.address);if(!N){console.log("❌ No address available for refreshing runes balances");return}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}console.log("🔄 Refreshing Runes balances for address:",N);const $=await D.getRunesBalances(N);d($),console.log("✅ Refreshed Runes balances:",$)}catch(N){console.error("❌ Failed to refresh Runes balances:",N)}},m=async C=>{if(!e)throw new Error("No wallet connected");return await D.signPSBT(C)},y=async()=>{if(!e)throw new Error("No wallet connected");return await D.getBalance()},A=async()=>{try{const C=await D.getCurrentNetwork();c(C)}catch(C){console.error("Failed to refresh network:",C)}},S={account:e,isConnected:!!e,isConnecting:s,availableWallets:o,currentNetwork:l,requiredNetwork:h,runesBalances:u,connect:f,disconnect:v,signPSBT:m,getBalance:y,refreshNetwork:A,refreshRunesBalances:x,refreshWallets:async()=>{try{console.log("🔄 Refreshing wallet detection...");const C=await D.getAvailableWallets();i(C),console.log("✅ Wallets refreshed:",C.map(N=>`${N.name}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}: ${N.installed?"installed":"not installed"}`))}catch(C){console.error("Failed to refresh wallets:",C)}}};return t.jsx(ar.Provider,{value:S,children:n})},or=g.createContext(void 0),Us=()=>{const n=g.useContext(or);if(!n)throw new Error("useNotifications must be used within a NotificationProvider");return n},qs=({children:n})=>{const[e,r]=g.useState([]),s=h=>{const f=`notification_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,v={...h,id:f,autoClose:h.autoClose!==!1,duration:h.duration||5e3};r(x=>[...x,v])},d={notifications:e,addNotification:s,removeNotification:h=>{r(f=>f.filter(v=>v.id!==h))},clearAllNotifications:()=>{r([])},showSuccess:(h,f,v=5e3)=>{s({type:"success",title:h,message:f,duration:v})},showError:(h,f,v=7e3)=>{s({type:"error",title:h,message:f,duration:v})},showInfo:(h,f,v=5e3)=>{s({type:"info",title:h,message:f,duration:v})},showWarning:(h,f,v=6e3)=>{s({type:"warning",title:h,message:f,duration:v})}};return t.jsx(or.Provider,{value:d,children:n})};class St extends g.Component{constructor(){super(...arguments);I(this,"state",{hasError:!1})}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,s){var a,o;console.error("ErrorBoundary caught an error:",r,s),(o=(a=this.props).onError)==null||o.call(a,r,s)}render(){var r;return this.state.hasError?this.props.fallback?this.props.fallback:t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50 dark:bg-red-900/20",children:t.jsx("div",{className:"max-w-md w-full mx-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-red-200 dark:border-red-800",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-red-800 dark:text-red-200",children:"Component Error"}),t.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:"Something went wrong with this component"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded border border-red-200 dark:border-red-800",children:t.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-mono",children:((r=this.state.error)==null?void 0:r.message)||"Unknown error occurred"})}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Reload Page"}),t.jsx("button",{onClick:()=>this.setState({hasError:!1,error:void 0}),className:"flex-1 bg-gray-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-gray-700 transition-colors",children:"Try Again"})]}),t.jsx("div",{className:"text-center",children:t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"If this persists, please contact support"})})]})]})})}):this.props.children}}const ee=class ee{constructor(){I(this,"securityAlerts",[]);I(this,"trustedDomains",new Set(["localhost","127.0.0.1"]));I(this,"sessionStartTime",Date.now())}static getInstance(){return ee.instance||(ee.instance=new ee),ee.instance}validatePSBT(e,r,s){const a={isValid:!0,risks:[],warnings:[],recommendations:[]};try{if(!e||typeof e!="string")return a.isValid=!1,a.risks.push("Invalid PSBT format"),a;(e.includes("eval(")||e.includes("javascript:"))&&(a.isValid=!1,a.risks.push("PSBT contains suspicious code patterns")),e.length>1e6&&(a.isValid=!1,a.risks.push("PSBT size exceeds safety limits"));const o=(e.match(/output/gi)||[]).length;o>10&&a.warnings.push(`PSBT has ${o}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);} outputs - verify all destinations`),r&&r>1&&a.warnings.push("Large transaction amount - please verify carefully"),a.recommendations.push("Verify transaction details in your wallet before signing"),a.recommendations.push("Never sign PSBTs from untrusted sources"),a.recommendations.push("Check all output addresses match your expectations")}catch(o){a.isValid=!1,a.risks.push(`PSBT validation error: ${o.message}`)}return a}monitorWalletActivity(e){const r=Date.now();e.type==="sign"&&this.getRecentActivities("sign",6e4).length>5&&this.addSecurityAlert({type:"warning",message:"Rapid signing attempts detected - verify you initiated all transactions",timestamp:r}),e.type==="network_change"&&this.addSecurityAlert({type:"info",message:"Network changed - verify you are on the correct network",timestamp:r}),this.storeActivity(e)}validateWalletConnection(e,r){const s=[];let a=!0;if(!e||typeof e!="object")return a=!1,s.push("Wallet object is invalid or missing"),{isSecure:a,warnings:s};const o=["requestAccounts","signPsbt","getAccounts"];for(const l of o)typeof e[l]!="function"&&s.push(`Wallet missing required method: ${l}`);const i=["eval","Function"];for(const l of i)e[l]&&(s.push(`Wallet has suspicious property: ${l}`),a=!1);if(typeof window<"u"){const l=window.location.origin;this.trustedDomains.has(new URL(l).hostname)||s.push("Application not running on trusted domain")}return{isSecure:a,warnings:s}}validateSession(){const e=Date.now(),r=e-this.sessionStartTime,s=24*60*60*1e3;return r>s?(this.addSecurityAlert({type:"warning",message:"Long session detected - consider refreshing for security",timestamp:e}),!1):!0}performSecurityScan(){var s;const e=[],r=[];return typeof window<"u"&&(window.outerHeight-window.innerHeight>200||window.outerWidth-window.innerWidth>200)&&(e.push("Developer tools may be open"),r.push("Close developer tools for better security")),typeof window<"u"&&((s=window.chrome)!=null&&s.runtime)&&r.push("Be cautious of browser extensions that can access wallet data"),typeof localStorage<"u"&&Object.keys(localStorage).filter(i=>i.toLowerCase().includes("private")||i.toLowerCase().includes("seed")||i.toLowerCase().includes("mnemonic")).length>0&&(e.push("Sensitive data detected in browser storage"),r.push("Clear browser data regularly")),{threats:e,recommendations:r}}addSecurityAlert(e){const r={...e,id:`alert_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,resolved:!1};this.securityAlerts.push(r),this.securityAlerts.length>100&&(this.securityAlerts=this.securityAlerts.slice(-100)),e.type==="critical"?console.error("🚨 CRITICAL SECURITY ALERT:",e.message):e.type==="warning"&&console.warn("⚠️ SECURITY WARNING:",e.message)}getRecentActivities(e,r){return[]}storeActivity(e){console.log("Activity logged:",e.type,e.wallet)}getSecurityAlerts(){return this.securityAlerts.filter(e=>!e.resolved)}resolveAlert(e){const r=this.securityAlerts.find(s=>s.id===e);r&&(r.resolved=!0)}generateSecurityReport(){const e=this.getSecurityAlerts(),r=e.filter(l=>l.type==="critical"),s=e.filter(l=>l.type==="warning");let a="secure",o="Security status is good";r.length>0?(a="critical",o=`${r.length} critical security issue(s) detected`):s.length>0&&(a="warning",o=`${s.length} security warning(s) active`);const i=this.performSecurityScan();return{status:a,summary:o,details:{activeAlerts:e.length,sessionDuration:Date.now()-this.sessionStartTime,lastScan:Date.now(),recommendations:["Always verify transaction details before signing","Keep your wallet software updated","Never share your private keys or seed phrases","Use hardware wallets for large amounts",...i.recommendations]}}}};I(ee,"instance");let Xe=ee;const ct=({isOpen:n,onClose:e,title:r,children:s})=>(g.useEffect(()=>{const a=o=>{o.key==="Escape"&&e()};return n&&(document.addEventListener("keydown",a),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",a),document.body.style.overflow="unset"}},[n,e]),n?t.jsxs("div",{className:"modal-overlay",children:[t.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity",onClick:e}),t.jsx("div",{className:"relative z-50 flex min-h-full items-center justify-center p-4",children:t.jsxs("div",{className:"relative bg-white dark:bg-fractal-gray rounded-lg shadow-xl max-w-2xl w-full max-h-[85vh] overflow-hidden border border-gray-200 dark:border-gray-700",children:[r&&t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-fractal-gray sticky top-0 z-10",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r}),t.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"p-6 bg-white dark:bg-fractal-gray overflow-y-auto max-h-[calc(85vh-80px)]",children:s})]})})]}):null),Ct=()=>{const{account:n,isConnected:e,isConnecting:r,availableWallets:s,connect:a,disconnect:o,refreshWallets:i}=ae(),[l,c]=g.useState(!1),[u,d]=g.useState(null),[h,f]=g.useState(!1),[v,x]=g.useState([]),[m,y]=g.useState(!1),[A,P]=g.useState(!1),S=Xe.getInstance();g.useEffect(()=>{l&&(async()=>{try{await i()}catch(B){console.warn("Failed to refresh wallets on modal open:",B)}})()},[l,i]),g.useEffect(()=>{if(e&&n){const j=()=>{const M=S.generateSecurityReport();M.status!=="secure"?x(M.details.recommendations.slice(0,3)):x([])};j();const B=setInterval(j,3e4);return()=>clearInterval(B)}},[e,n]);const C=async()=>{P(!0),d(null);try{await i()}catch(err){d("Failed to refresh wallet detection")}finally{P(!1)}},N=async j=>{try{d(null);const B=j==="UniSat"?window.unisat:window.okxwallet;if(B){const M=S.validateWalletConnection(B,j),K=M.warnings.filter(U=>!U.includes("constructor")&&!U.includes("trusted domain"));if(K.length>0){d(`Security validation failed: ${K.join(", ")}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}`);return}M.warnings.length>0&&console.warn("Wallet security warnings (non-blocking):",M.warnings)}await a(j),S.monitorWalletActivity({type:"connect",wallet:j,details:{timestamp:Date.now()}}),c(!1)}catch(B){d(B instanceof Error?B.message:"Failed to connect wallet")}},$=()=>{o()},b=async()=>{if(n!=null&&n.address)try{await navigator.clipboard.writeText(n.address),f(!0),setTimeout(()=>f(!1),2e3)}catch(j){console.error("Failed to copy address:",j)}},R=j=>j?j.length<=16?j:`${j.slice(0,8)}...${j.slice(-8)}`:"";return e&&n?t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-3",children:[t.jsxs("div",{className:"hidden md:block text-right",children:[t.jsxs("div",{className:"text-responsive-sm font-medium",children:[n.balance.toFixed(8)," FB"]}),t.jsx("div",{className:"text-responsive-xs text-gray-500 dark:text-gray-400",children:"Fractal Bitcoin"})]}),t.jsxs("button",{onClick:b,className:"fractal-card py-2 px-3 min-w-0 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors relative touch-button w-full sm:w-auto",title:"Click to copy address",children:[t.jsxs("div",{className:"flex items-center justify-between sm:justify-center space-x-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full flex-shrink-0"}),t.jsx("span",{className:"font-mono text-responsive-xs",children:R(n.address)})]}),t.jsx("div",{className:"md:hidden text-right",children:t.jsxs("div",{className:"text-responsive-xs font-medium",children:[n.balance.toFixed(4)," FB"]})})]}),h&&t.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded z-10",children:"Copied!"})]}),v.length>0&&t.jsxs("button",{onClick:()=>y(!0),className:"touch-button p-2 text-yellow-500 hover:text-yellow-600 transition-colors relative",title:"Security warnings",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),t.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-yellow-500 rounded-full"})]}),t.jsx("button",{onClick:$,className:"touch-button p-2 text-gray-500 hover:text-red-500 transition-colors",title:"Disconnect wallet",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]}):t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>c(!0),disabled:r,className:"fractal-button",children:r?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),t.jsx("span",{children:"Connecting..."})]}):"Connect Wallet"}),t.jsx(ct,{isOpen:l,onClose:()=>c(!1),title:"Connect Wallet",children:t.jsxs("div",{className:"space-y-4",children:[u&&t.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:t.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:u})}),s.every(j=>!j.installed)&&t.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-400 font-medium",children:"No wallets detected"}),t.jsx("p",{className:"text-xs text-yellow-500 dark:text-yellow-500 mt-1",children:"If you have UniSat installed, try refreshing detection"})]}),t.jsx("button",{onClick:C,disabled:A,className:"px-3 py-1 bg-yellow-100 dark:bg-yellow-800 text-yellow-700 dark:text-yellow-200 rounded text-sm hover:bg-yellow-200 dark:hover:bg-yellow-700 transition-colors disabled:opacity-50",children:A?t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("div",{className:"w-3 h-3 border border-yellow-600 border-t-transparent rounded-full animate-spin"}),t.jsx("span",{children:"Refreshing..."})]}):"Refresh"})]})}),t.jsx("div",{className:"space-y-3",children:s.map(j=>t.jsxs("button",{onClick:()=>N(j.name),disabled:!j.installed||r,className:`w-full p-4 border rounded-lg flex items-center space-x-3 transition-all ${j.installed?"border-gray-200 dark:border-gray-700 hover:border-fractal-orange hover:bg-fractal-orange/5":"border-gray-100 dark:border-gray-800 opacity-50 cursor-not-allowed"}`,children:[t.jsx("div",{className:"w-8 h-8 bg-white rounded-lg flex items-center justify-center border border-gray-200 dark:border-gray-700",children:j.name==="UniSat"?t.jsx("img",{src:"unisat-logo.png",alt:"UniSat Wallet",className:"w-6 h-6 object-contain"}):j.name==="OKX"?t.jsx("img",{src:"okx-logo.png",alt:"OKX Wallet",className:"w-6 h-6 object-contain"}):t.jsx("span",{className:"text-sm font-bold",children:j.name.charAt(0)})}),t.jsxs("div",{className:"flex-1 text-left",children:[t.jsx("div",{className:"font-medium",children:j.name}),t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:j.installed?"Ready to connect":"Not installed"})]}),!j.installed&&t.jsx("a",{href:j.name==="UniSat"?"https://unisat.io":"https://www.okx.com/web3",target:"_blank",rel:"noopener noreferrer",className:"text-fractal-orange text-sm hover:underline",onClick:B=>B.stopPropagation(),children:"Install"})]},j.name))}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"By connecting a wallet, you agree to the Terms of Service and Privacy Policy."})]})})]})},Rt=()=>{const{currentNetwork:n,availableNetworks:e,switchNetwork:r}=lt(),[s,a]=g.useState(!1),o=i=>{r(i),a(!1)};return t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>a(!0),className:"flex items-center space-x-2 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-fractal-orange transition-colors",children:[t.jsx("div",{className:`w-2 h-2 rounded-full ${n.type==="fractal_testnet"?"bg-yellow-500":"bg-green-500"}`}),t.jsx("span",{className:"text-sm font-medium",children:n.name}),t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs(ct,{isOpen:s,onClose:()=>a(!1),title:"Select Network",children:[t.jsx("div",{className:"space-y-3",children:e.map(i=>t.jsxs("button",{onClick:()=>o(i.type),className:`w-full p-4 border rounded-lg flex items-center space-x-3 transition-all ${n.type===i.type?"border-fractal-orange bg-fractal-orange/5":"border-gray-200 dark:border-gray-700 hover:border-fractal-orange hover:bg-fractal-orange/5"}`,children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${i.type==="fractal_testnet"?"bg-yellow-500":"bg-green-500"}`}),t.jsxs("div",{className:"flex-1 text-left",children:[t.jsx("div",{className:"font-medium",children:i.name}),t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:i.type==="fractal_testnet"?"Test Network":"Main Network"})]}),n.type===i.type&&t.jsx("div",{className:"text-fractal-orange",children:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},i.type))}),t.jsx("div",{className:"mt-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx("svg",{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Network Switch Warning"}),t.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-1",children:"Switching networks will reset your current session and may affect pending transactions."})]})]})})]})]})},At=()=>{const{currentLayer:n,availableLayers:e,switchLayer:r,refreshLayers:s}=lt(),[a,o]=g.useState(!1),[i,l]=g.useState(!1),c=f=>{r(f),o(!1)},u=async()=>{l(!0);try{await s()}finally{l(!1)}},d=f=>{switch(f){case"active":return"bg-green-500";case"syncing":return"bg-yellow-500 animate-pulse";case"offline":return"bg-red-500";default:return"bg-gray-500"}},h=f=>{switch(f){case"low":return"text-green-600 dark:text-green-400";case"medium":return"text-yellow-600 dark:text-yellow-400";case"high":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}};return n?t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>o(!0),className:"flex items-center space-x-2 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-fractal-orange transition-colors",children:[t.jsx("div",{className:`w-2 h-2 rounded-full ${d(n.status)}`}),t.jsx("span",{className:"text-sm font-medium",children:n.name}),t.jsxs("span",{className:"layer-indicator",children:["L",n.level]}),t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsx(ct,{isOpen:a,onClose:()=>o(!1),title:"Fractal Layers",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h4",{className:"font-medium",children:"Available Layers"}),t.jsx("button",{onClick:u,disabled:i,className:"p-2 text-gray-500 hover:text-fractal-orange transition-colors",title:"Refresh layers",children:t.jsx("svg",{className:`w-4 h-4 ${i?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),t.jsx("div",{className:"space-y-3",children:e.map(f=>t.jsxs("button",{onClick:()=>c(f.id),className:`w-full p-4 border rounded-lg text-left transition-all ${(n==null?void 0:n.id)===f.id?"border-fractal-orange bg-fractal-orange/5":"border-gray-200 dark:border-gray-700 hover:border-fractal-orange hover:bg-fractal-orange/5"}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${d(f.status)}`}),t.jsx("span",{className:"font-medium",children:f.name}),t.jsxs("span",{className:"layer-indicator",children:["L",f.level]})]}),(n==null?void 0:n.id)===f.id&&t.jsx("div",{className:"text-fractal-orange",children:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Status:"}),t.jsx("span",{className:"ml-1 capitalize",children:f.status})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Block:"}),t.jsx("span",{className:"ml-1 font-mono",children:f.blockHeight.toLocaleString()})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Anchored:"}),t.jsx("span",{className:"ml-1",children:f.anchored?"✓":"✗"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Congestion:"}),t.jsx("span",{className:`ml-1 capitalize ${h(f.congestion)}`,children:f.congestion})]})]}),t.jsxs("div",{className:"mt-2 text-sm",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Fee Rate:"}),t.jsxs("span",{className:"ml-1 font-mono",children:[f.feeRate," sat/vB"]})]})]},f.id))}),t.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Fractal Layer System"}),t.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"Each layer operates as a recursive BCSP instance. Higher layers may have different fee rates and confirmation times."})]})]})})]})})]}):t.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),t.jsx("span",{className:"text-sm text-gray-500",children:"No Layer"})]})},Ws=()=>{const{theme:n,toggleTheme:e}=sr(),{currentNetwork:r}=lt(),{isConnected:s,currentNetwork:a,requiredNetwork:o}=ae(),[i,l]=g.useState(!1),c=s&&a&&a.includes("testnet");return t.jsx("header",{className:"border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-fractal-gray sticky top-0 z-50",children:t.jsxs("div",{className:"container mx-auto px-responsive",children:[t.jsxs("div",{className:"flex items-center justify-between h-16 sm:h-20",children:[t.jsx("div",{className:"flex items-center space-responsive-x",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg flex items-center justify-center overflow-hidden",children:t.jsx("img",{src:"fbr.png",alt:"Fractal Bitcoin Runes",className:"w-full h-full object-contain"})}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-responsive-base font-bold gradient-text",children:[t.jsx("span",{className:"hidden sm:inline",children:"Fractal Bitcoin"}),t.jsx("span",{className:"sm:hidden",children:"FB"})," Swap"]}),t.jsx("p",{className:"hidden sm:block text-xs text-gray-500 dark:text-gray-400 font-mono",children:"Runes ⟷ FB Atomic Swaps • Fractal Bitcoin Mainnet"})]})]})}),t.jsxs("div",{className:"hidden lg:flex items-center space-x-4",children:[s&&t.jsx("div",{className:"flex items-center space-x-2",children:c?t.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded-lg text-sm",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),t.jsx("span",{children:"Wrong Network"})]}):t.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-lg text-sm",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("span",{children:"Fractal Mainnet"})]})}),t.jsx(Rt,{}),t.jsx(At,{}),t.jsx(Ct,{}),t.jsx("button",{onClick:e,className:"touch-button p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:`Switch to ${n==="light"?"dark":"light"} mode`,children:n==="light"?t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})]}),t.jsxs("div",{className:"lg:hidden flex items-center space-x-2",children:[t.jsx("button",{onClick:e,className:"touch-button p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:`Switch to ${n==="light"?"dark":"light"} mode`,children:n==="light"?t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})}),t.jsx("button",{onClick:()=>l(!i),className:"touch-button p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:"Open menu",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i?t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),i&&t.jsxs("div",{className:"lg:hidden border-t border-gray-200 dark:border-gray-700 py-4 space-responsive-y mobile-safe-area",children:[s&&t.jsx("div",{className:"flex items-center justify-center",children:c?t.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded-lg text-responsive-sm",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),t.jsx("span",{children:"Wrong Network"})]}):t.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-lg text-responsive-sm",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("span",{children:"Fractal Mainnet"})]})}),t.jsxs("div",{className:"space-responsive-y",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-responsive-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Network"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Rt,{}),t.jsx(At,{})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-responsive-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Wallet Connection"}),t.jsx(Ct,{})]})]})]}),c&&t.jsx("div",{className:"mt-4 p-3 sm:p-4 bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800 rounded-lg",children:t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx("svg",{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-red-800 dark:text-red-200 font-medium text-responsive-sm",children:"Please switch to Fractal Bitcoin Mainnet"}),t.jsxs("p",{className:"text-red-600 dark:text-red-400 text-responsive-xs mt-1 break-words",children:["Your wallet is currently connected to ",a||"an unsupported network",". Please switch to Fractal Bitcoin Mainnet to use this platform."]})]})]})})]})})},Ds=()=>t.jsx("footer",{className:"border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-fractal-gray",children:t.jsxs("div",{className:"container mx-auto px-4 py-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between space-y-4 md:space-y-0",children:[t.jsx("div",{className:"flex items-center space-x-4",children:t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.jsx("span",{className:"font-mono",children:"Powered by "}),t.jsx("span",{className:"font-semibold gradient-text",children:"Fractal Bitcoin"})]})}),t.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[t.jsx("a",{href:"https://fractalbitcoin.io",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 dark:text-gray-400 hover:text-fractal-orange transition-colors",children:"About Fractal"}),t.jsx("a",{href:"https://docs.fractalbitcoin.io",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 dark:text-gray-400 hover:text-fractal-orange transition-colors",children:"Documentation"}),t.jsx("a",{href:"https://github.com/fractal-bitcoin",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 dark:text-gray-400 hover:text-fractal-orange transition-colors",children:"GitHub"})]}),t.jsx("div",{className:"flex items-center space-x-4",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 font-mono",children:"Network Active"})]})})]}),t.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between space-y-2 md:space-y-0",children:[t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"© 2024 Fractal Bitcoin Swap Platform. Built with recursive BCSP instances."}),t.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[t.jsx("span",{children:"⚠️ Testnet Only"}),t.jsx("span",{children:"•"}),t.jsx("span",{children:"Use at your own risk"})]})]})})]})}),zs=({children:n})=>{const{theme:e}=sr();return t.jsx("div",{className:`min-h-screen flex flex-col ${e==="dark"?"dark":""}`,children:t.jsxs("div",{className:"bg-white dark:bg-fractal-gray transition-colors duration-200",children:[t.jsx(Ws,{}),t.jsx("main",{className:"flex-1 container mx-auto px-4 py-8",children:n}),t.jsx(Ds,{})]})})},Hs="modulepreload",Vs=function(n){return"/swap/"+n},Ft={},dt=function(e,r,s){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=Vs(c),c in Ft)return;Ft[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Hs,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,v)=>{h.addEventListener("load",f),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return aconsole.log("[TRACE] Promise.then in index-5JuZi7QJ.js");for(const l of i||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})},te=class te{constructor(){I(this,"fbPrice",0);I(this,"lastUpdate",0);I(this,"updateInterval",3e4);I(this,"isUpdating",!1);this.initializePriceUpdates()}static getInstance(){return te.instance||(te.instance=new te),te.instance}async initializePriceUpdates(){console.log("[TRACE] init method in index-5JuZi7QJ.js");await this.updateFBPrice();setInterval(()=>{this.updateFBPrice()},this.updateInterval)}async updateFBPrice(){if(!this.isUpdating){this.isUpdating=!0;try{const e=await this.fetchFBPriceWithFallback();e&&e>0&&(this.fbPrice=e,this.lastUpdate=Date.now(),console.log(`FB price updated: $${e.toFixed(8)}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}`))}catch(e){console.error("Failed to update FB price:",e)}finally{this.isUpdating=!1}}}async fetchFBPriceWithFallback(){const e=[this.fetchFromCoinGecko,this.fetchFromUniSat,this.fetchFromCoinMarketCap,this.fetchFromBinance];for(const r of e)try{const s=await r.call(this);if(s&&s>0)return s}catch(s){console.warn("Price source failed:",s);continue}return null}async fetchFromCoinGecko(){var e;try{const r=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=fractal-bitcoin&vs_currencies=usd",{headers:{Accept:"application/json"}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}});if(!r.ok)throw new Error(`HTTP ${r.status}`);return((e=(await r.json())["fractal-bitcoin"])==null?void 0:e.usd)||null}catch(r){return console.warn("CoinGecko fetch failed:",r),null}}async fetchFromUniSat(){var e;try{const r=await fetch("https://open-api-fractal.unisat.io/v1/indexer/market/price",{headers:{Accept:"application/json"}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}});if(!r.ok)throw new Error(`HTTP ${r.status}`);return((e=(await r.json()).data)==null?void 0:e.price_usd)||null}catch(r){return console.warn("UniSat fetch failed:",r),null}}async fetchFromCoinMarketCap(){var e,r,s,a;try{const o="your_cmc_api_key_here",i=await fetch("https://pro-api.coinmarketcap.com/v1/cryptocurrency/quotes/latest?symbol=FB",{headers:{"X-CMC_PRO_API_KEY":o,Accept:"application/json"}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}});if(!i.ok)throw new Error(`HTTP ${i.status}`);return((a=(s=(r=(e=(await i.json()).data)==null?void 0:e.FB)==null?void 0:r.quote)==null?void 0:s.USD)==null?void 0:a.price)||null}catch(o){return console.warn("CoinMarketCap fetch failed:",o),null}}async fetchFromBinance(){try{const e=await fetch("https://api.binance.com/api/v3/ticker/price?symbol=FBUSDT");if(!e.ok)return null;const r=await e.json();return parseFloat(r.price)||null}catch(e){return console.warn("Binance fetch failed:",e),null}}getFBPrice(){return this.fbPrice}getFBPriceFormatted(){return`$${this.fbPrice.toFixed(8)}`}getLastUpdateTime(){return this.lastUpdate}isStale(){return Date.now()-this.lastUpdate>this.updateInterval*2}async forceUpdate(){await this.updateFBPrice()}convertFBToUSD(e){return e*this.fbPrice}convertUSDToFB(e){return this.fbPrice>0?e/this.fbPrice:0}formatUSDValue(e){return`$${this.convertFBToUSD(e).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:8})}`}};I(te,"instance");let Je=te;const Ks=()=>{var pt;const{isConnected:n,account:e,runesBalances:r}=ae(),[s,a]=g.useState("buy"),[o,i]=g.useState(""),[l,c]=g.useState(""),[u,d]=g.useState(""),[h,f]=g.useState([]),[v,x]=g.useState(null),[m,y]=g.useState(""),[A,P]=g.useState(!1),[S,C]=g.useState(0),[N]=g.useState(()=>Je.getInstance()),[$]=g.useState(()=>Ce.getInstance()),[b,R]=g.useState([]),[j,B]=g.useState(null),[M,K]=g.useState(!1),[searchTerm,setSearchTerm]=g.useState(""),[filteredRunes,setFilteredRunes]=g.useState([]),[isSearching,setIsSearching]=g.useState(!1);const searchLiveRunes=async(searchQuery)=>{if(!searchQuery||searchQuery.length<2){setFilteredRunes([]);return}try{setIsSearching(!0);console.log(`🔍 Live search for Fractal Bitcoin rune: "${searchQuery}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}"`);const baseUrl="https://open-api-fractal.unisat.io";const searchEndpoints=[`/v1/indexer/runes/search?q=${encodeURIComponent(searchQuery)}`,`/v1/indexer/runes/info-list?search=${encodeURIComponent(searchQuery)}`,`/v1/indexer/runes/list?search=${encodeURIComponent(searchQuery)}&limit=20`];let foundRunes=[];for(const endpoint of searchEndpoints){try{console.log(`🔍 Trying endpoint: ${baseUrl}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}${endpoint}`);const response=await fetch(`${baseUrl}${endpoint}`,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(response.ok){const data=await response.json();if(data.code===0&&data.data){const runesData=data.data.detail||data.data.list||data.data;if(Array.isArray(runesData)&&runesData.length>0){foundRunes=runesData.filter(rune=>{const runeName=(rune.spacedRune||rune.rune||"").toLowerCase();const searchTerm=searchQuery.toLowerCase();return runeName.includes(searchTerm)||runeName.replace(/[•·]/g,"").includes(searchTerm.replace(/[•·]/g,""))}).map(rune=>({rune:rune.spacedRune||rune.rune,runeid:rune.runeid||rune.number?.toString()||rune.spacedRune,spacedRune:rune.spacedRune||rune.rune,amount:"0",symbol:rune.symbol||"",divisibility:rune.divisibility||0,holders:rune.holders||0,supply:rune.supply||"0"}));console.log(`✅ Found ${foundRunes.length} live runes from ${endpoint}`);break}}}catch(error){console.log(`❌ Endpoint ${endpoint} failed:`,error.message);continue}}if(foundRunes.length===0){console.log("🔍 No results from API, trying direct rune name lookup...");try{const directLookup=await fetch(`${baseUrl}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}/v1/indexer/runes/info-list?start=0&limit=100`,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(directLookup.ok){const directData=await directLookup.json();if(directData.code===0&&directData.data?.detail){const allRunes=directData.data.detail;foundRunes=allRunes.filter(rune=>{const runeName=(rune.spacedRune||rune.rune||"").toLowerCase();const searchTerm=searchQuery.toLowerCase();return runeName.includes(searchTerm)||runeName.replace(/[•·]/g,"").includes(searchTerm.replace(/[•·]/g,""))}).slice(0,10).map(rune=>({rune:rune.spacedRune||rune.rune,runeid:rune.runeid||rune.number?.toString()||rune.spacedRune,spacedRune:rune.spacedRune||rune.rune,amount:"0",symbol:rune.symbol||"",divisibility:rune.divisibility||0,holders:rune.holders||0,supply:rune.supply||"0"}));console.log(`✅ Found ${foundRunes.length} runes via direct lookup`);}}}catch(error){console.error("Direct lookup failed:",error)}}console.log(`📊 Final search results: ${foundRunes.length} runes found`);setFilteredRunes(foundRunes);}catch(error){console.error("❌ Live rune search failed:",error);setFilteredRunes([])}finally{setIsSearching(!1)}};g.useEffect(()=>{const w=()=>{C(N.getFBPrice())};w();const k=setInterval(w,3e4);return()=>clearInterval(k)},[N]),g.useEffect(()=>{(async()=>{if(!n||!(e!=null&&e.address)){R([]);return}K(!0);try{if(s==="sell"){console.log("🔄 Loading wallet Runes for selling:",e.address);const k=await $.getRunesBalances(e.address);R(k),console.log("✅ Loaded wallet Runes:",k.length)}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}else{console.log("🔄 Loading top market Runes for buying");const k=await $.getTopRunes(50);R(k),console.log("✅ Loaded top market Runes:",k.length)}}catch(k){console.error("❌ Failed to load Runes:",k),R([])}finally{K(!1)}})()},[n,e==null?void 0:e.address,$,s]),g.useEffect(()=>{(async()=>{if(!o){B(null);return}try{const k=b.find(F=>F.runeid===o||F.spacedRune===o||F.symbol===o);if(k){const F=await $.getRuneInfo(k.runeid);B(F)}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}}catch(k){console.error("Failed to load rune info:",k),B(null)}})()},[o,b,$]),g.useEffect(()=>{o&&l&&parseFloat(l)>0?be():(f([]),x(null))},[o,l,s]);const U=async w=>{try{const[k,F]=await Promise.all([de(w),Ue(w)]);if(!k&&!F)return null;const L=ft(k,F,w);return L?{id:s==="buy"?"instant_buy":"instant_sell",type:"instant_market",title:s==="buy"?"🟢 Buy Instantly":"🔴 Sell Instantly",description:L.description,price:L.averagePrice,amount:s==="buy"?L.tokensReceived:w,totalCost:s==="buy"?w:L.fbReceived,available:!0,source:"unified",fees:L.totalFees,priceImpact:L.priceImpact,executionPlan:L}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}:null}catch(k){return console.error("Failed to fetch unified quote:",k),null}},de=async w=>{try{return!o||w<=0||console.log(`Checking orderbook for ${o}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}, amount: ${w}`),null}catch(k){return console.error("Orderbook fetch error:",k),null}},Ue=async w=>{try{return!o||w<=0||console.log(`Checking liquidity pools for ${o}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}, amount: ${w}`),null}catch(k){return console.error("Liquidity pool fetch error:",k),null}},ft=(w,k,F)=>{if(!w&&!k)return null;let L={routes:[],totalFees:0,averagePrice:0,tokensReceived:0,fbReceived:0,priceImpact:0,description:""};if(!w&&k)L={routes:[{source:"pool",amount:F,price:k.price}],totalFees:k.fees+F*.001,averagePrice:k.price,tokensReceived:s==="buy"?F/k.price*1e8:0,fbReceived:s==="sell"?F*k.price/1e8:0,priceImpact:k.priceImpact,description:"Executed via liquidity pool with optimal routing"};else if(w&&!k)L={routes:[{source:"orderbook",amount:F,price:w.price}],totalFees:w.fees+F*.0015,averagePrice:w.price,tokensReceived:s==="buy"?F/w.price*1e8:0,fbReceived:s==="sell"?F*w.price/1e8:0,priceImpact:0,description:"Executed via orderbook with automatic order splitting and relisting"};else if(s==="buy"?w.price<k.price:w.price>k.price){const q=Math.min(F,w.liquidity),O=F-q;L={routes:[{source:"orderbook",amount:q,price:w.price},...O>0?[{source:"pool",amount:O,price:k.price}]:[]],totalFees:w.fees+(O>0?k.fees*(O/F):0)+F*.0015,averagePrice:(w.price*q+k.price*O)/F,tokensReceived:s==="buy"?(q/w.price+O/k.price)*1e8:0,fbReceived:s==="sell"?(q*w.price+O*k.price)/1e8:0,priceImpact:O>0?k.priceImpact*(O/F):0,description:O>0?`Best execution: ${(q/F*100).toFixed(0)}% via orderbook, ${(O/F*100).toFixed(0)}% via pool`:"Executed via orderbook with optimal pricing"}}else{const q=Math.min(F,k.liquidity),O=F-q;L={routes:[{source:"pool",amount:q,price:k.price},...O>0?[{source:"orderbook",amount:O,price:w.price}]:[]],totalFees:k.fees+(O>0?w.fees*(O/F):0)+F*.0015,averagePrice:(k.price*q+w.price*O)/F,tokensReceived:s==="buy"?(q/k.price+O/w.price)*1e8:0,fbReceived:s==="sell"?(q*k.price+O*w.price)/1e8:0,priceImpact:k.priceImpact*(q/F),description:O>0?`Best execution: ${(q/F*100).toFixed(0)}% via pool, ${(O/F*100).toFixed(0)}% via orderbook`:"Executed via liquidity pool with optimal routing"}}return L},be=async()=>{P(!0);try{await new Promise(_=>setTimeout(_,500));const w=parseFloat(l),k=await U(w),F={hasLiveListings:k!==null,hasLiveBuyOrders:k!==null,hasPoolLiquidity:k!==null,bestAskPrice:k?k.price:null,bestBidPrice:k?k.price:null,poolPrice:k?k.price:null,poolLiquidity:k?5e7:0}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);};x(F);const L=[];k&&L.push(k),L.push({id:s==="buy"?"limit_buy":"limit_sell",type:"limit_order",title:"📋 Create Limit Order",description:k?"Set a custom price and wait for the market to reach your target":"No liquidity available - place order for future fulfillment",price:0,amount:s==="buy"?0:w,totalCost:0,available:!0,source:"pending",fees:0}),f(L),L.length>0&&d(L[0].id)}catch(w){console.error("Failed to load trade options:",w)}finally{P(!1)}},Y=async()=>{const w=h.find(k=>k.id===u);if(w){if(h.length===1&&h[0].type==="limit_order"&&!m){alert("Please set your desired price for the limit order");return}if(w.type==="limit_order"&&!m){alert("Please set your desired price for the limit order");return}if(!(e!=null&&e.address)){alert("Please connect your wallet first");return}if(w.type==="instant_market"&&h.length===1&&h[0].type==="limit_order"){alert("No liquidity available for instant trading. Please create a limit order instead.");return}try{console.log("Executing trade:",{direction:s,rune:o,option:w,customPrice:m}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}),w.type==="limit_order"?await qe():w.type==="instant_market"?await Q(w):w.type==="pool_swap"&&await Br(w)}catch(k){console.error("Trade failed:",k),alert(`Trade failed: ${k instanceof Error?k.message:"Unknown error"}`)}}},qe=async()=>{if(!(e!=null&&e.address)||!o||!m||!l)throw new Error("Missing required order parameters");const w=parseFloat(l),k=parseFloat(m),F=b.find(_=>_.spacedRune===o||_.symbol===o||_.runeid===o);if(!F)throw new Error("Selected rune not found");const L=s==="buy"?w*1e8/k:w;console.log("Creating limit order with real-world service...");try{const{default:_}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}=await dt(async()=>{const{default:Tr}=await import("./realWorldTradingService-CHhmuxSv.js");return{default:Tr}},__vite__mapDeps([0,1,2])),O=await _.getInstance().createLimitOrder({type:s,rune:o,runeId:F.runeid,pricePerToken:k,tokenAmount:L,fbAmount:w,expiryHours:24});alert(`✅ Limit Order Created Successfully!

Order ID: ${O.orderId}
Commitment TX: ${O.commitmentTx}

Details:
• Type: ${s.toUpperCase()}
• Rune: ${o}
• Price: ${k} sats per token
• Amount: ${s==="buy"?`${w} FB`:`${L.toLocaleString()} tokens`}
• Expires: 24 hours

Your order is now active and secured with on-chain commitment. It will be automatically matched when a compatible order is found.`),i(""),c(""),y(""),d("")}catch(_){throw console.error("Limit order creation failed:",_),_}},Q=async w=>{console.log("Executing instant trade...");try{alert(`✅ Instant ${s==="buy"?"Buy":"Sell"}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);} Executed!

Amount: ${w.amount.toLocaleString()} ${o}
Price: ${Math.round(w.price*1e8)} sats per token
Total: ${w.totalCost.toFixed(8)} FB
Fees: ${w.fees.toFixed(8)} FB`),i(""),c(""),d("")}catch(k){throw console.error("Instant trade failed:",k),k}},Br=async w=>{var k;console.log("Executing pool swap...");try{alert(`✅ Pool Swap Executed!

Swapped via liquidity pool
Price Impact: ${(k=w.priceImpact)==null?void 0:k.toFixed(2)}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}%
Amount: ${w.amount.toLocaleString()} ${o}
Total: ${w.totalCost.toFixed(8)} FB`),i(""),c(""),d("")}catch(F){throw console.error("Pool swap failed:",F),F}};return n?t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-lg",children:"₿"})}),t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:"Fractal Bitcoin (FB)"}),t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Live Market Price"})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:S>0?`$${S.toFixed(8)}`:"Loading..."}),t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[t.jsx("div",{className:`w-2 h-2 rounded-full ${N.isStale()?"bg-red-500":"bg-green-500"}`}),t.jsx("span",{children:N.isStale()?"Price stale":"Live price"}),t.jsx("button",{onClick:()=>N.forceUpdate(),className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:"🔄"})]})]})]})}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:[t.jsx("div",{className:"flex justify-center mb-6",children:t.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-1 flex",children:[t.jsx("button",{onClick:()=>a("buy"),className:`px-6 py-2 rounded-md font-medium transition-all ${s==="buy"?"bg-green-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:text-green-600"}`,children:"🟢 Buy"}),t.jsx("button",{onClick:()=>a("sell"),className:`px-6 py-2 rounded-md font-medium transition-all ${s==="sell"?"bg-red-600 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:text-red-600"}`,children:"🔴 Sell"})]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Select Rune ",M&&t.jsx("span",{className:"text-blue-500",children:"(Loading live data...)"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:searchTerm,onChange:w=>{const searchValue=w.target.value;setSearchTerm(searchValue);if(searchValue.length>=2){searchLiveRunes(searchValue)}else{setFilteredRunes([]);setIsSearching(!1)}},placeholder:`Search or type rune name (e.g., "black•myth•sun•wu•kong")...`,className:"w-full p-3 pr-10 border rounded-lg dark:bg-gray-700 dark:border-gray-600",disabled:M}),t.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:isSearching?t.jsx("div",{className:"w-5 h-5 border-2 border-fractal-orange border-t-transparent rounded-full animate-spin"}):t.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),searchTerm.length>=2&&t.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:isSearching?t.jsx("div",{className:"p-3 text-center text-gray-500",children:"Searching..."}):filteredRunes.length>0?filteredRunes.map(w=>{const k=w.spacedRune||w.symbol||w.runeid,F=s==="sell";return t.jsxs("button",{onClick:()=>{i(k);setSearchTerm(k);setFilteredRunes([])},className:"w-full p-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 border-b border-gray-100 dark:border-gray-600 last:border-b-0",children:[t.jsx("div",{className:"font-medium",children:k}),F&&t.jsxs("div",{className:"text-sm text-gray-500",children:["Balance: ",$.getFormattedBalance(w)," ",w.symbol||""]}),t.jsx("div",{className:"text-xs text-gray-400",children:w.runeid})]},w.runeid)}):t.jsx("div",{className:"p-3 text-center text-gray-500",children:`No runes found matching "${searchTerm}"`})})]}),!searchTerm&&t.jsxs("select",{value:o,onChange:w=>i(w.target.value),className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 mt-2",disabled:M,children:[t.jsx("option",{value:"",children:M?`Loading ${s==="sell"?"wallet":"market"} Runes...`:`Choose a rune to ${s}...`}),b.map(w=>{const k=w.spacedRune||w.symbol||w.runeid,F=s==="sell";return t.jsxs("option",{value:k,children:[k,F&&` (Balance: ${$.getFormattedBalance(w)} ${w.symbol||""})`]},w.runeid)}),!M&&b.length===0&&n&&t.jsx("option",{value:"",disabled:!0,children:s==="sell"?"No Runes found in wallet":"No Runes available for trading"})]}),j&&t.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:t.jsxs("div",{className:"text-sm space-y-1",children:[t.jsxs("div",{className:"font-medium text-blue-800 dark:text-blue-200",children:["📊 ",j.spacedRune||j.rune]}),t.jsxs("div",{className:"text-blue-700 dark:text-blue-300",children:[t.jsx("span",{className:"font-medium",children:"ID:"})," ",j.runeid]}),t.jsxs("div",{className:"text-blue-700 dark:text-blue-300",children:[t.jsx("span",{className:"font-medium",children:"Symbol:"})," ",j.symbol||"N/A"]}),t.jsxs("div",{className:"text-blue-700 dark:text-blue-300",children:[t.jsx("span",{className:"font-medium",children:"Holders:"})," ",j.holders.toLocaleString()]}),t.jsxs("div",{className:"text-blue-700 dark:text-blue-300",children:[t.jsx("span",{className:"font-medium",children:"Supply:"})," ",$.formatRuneAmount(j.supply,j.divisibility)]}),j.mintable&&t.jsx("div",{className:"text-green-600 dark:text-green-400 text-xs",children:"✅ Still mintable"})]})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:s==="buy"?"FB Amount to Spend":"Rune Amount to Sell"}),t.jsx("input",{type:"number",value:l,onChange:w=>c(w.target.value),className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600",placeholder:s==="buy"?"0.00000000 FB":"0.00000000 Runes"})]})]})]}),o&&l&&t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:[t.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["💱 ",s==="buy"?"Buy":"Sell"," Options for ",o]}),A?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Finding best options..."})]}):h.length===1&&h[0].type==="limit_order"?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("div",{className:"w-10 h-10 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-xl",children:"⚠️"})}),t.jsx("h3",{className:"font-semibold text-yellow-800 dark:text-yellow-200 text-lg",children:"No Liquidity Available"})]}),t.jsxs("p",{className:"text-yellow-700 dark:text-yellow-300 mb-4",children:["There's no liquidity available for ",t.jsx("strong",{children:o})," at the moment. Neither the orderbook nor liquidity providers have sufficient ",s==="buy"?"sellers":"buyers","."]}),t.jsxs("div",{className:"bg-yellow-100 dark:bg-yellow-900/40 rounded-lg p-4",children:[t.jsx("h4",{className:"font-medium text-yellow-800 dark:text-yellow-200 mb-2",children:"💡 What you can do:"}),t.jsxs("ul",{className:"text-yellow-700 dark:text-yellow-300 text-sm space-y-1",children:[t.jsx("li",{children:"• Create a limit order and wait for liquidity to appear"}),t.jsx("li",{children:"• Check back later when more traders are active"}),t.jsx("li",{children:"• Try a different amount or token"})]})]})]}),t.jsxs("div",{className:"border rounded-lg p-6 dark:border-gray-600 bg-white dark:bg-gray-800",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-lg",children:"📋"})}),t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Create Limit Order"})]}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Set your desired price and your order will be filled when liquidity becomes available."}),t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Your Desired Price (sats per ",o,")"]}),t.jsx("input",{type:"number",value:m,onChange:w=>y(w.target.value),className:"w-full p-3 border rounded-lg dark:bg-gray-600 dark:border-gray-500",placeholder:"Enter price in sats",step:"1"}),m&&t.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:t.jsxs("div",{className:"text-sm space-y-1",children:[t.jsx("div",{className:"font-medium text-blue-800 dark:text-blue-200",children:"Order Summary:"}),t.jsxs("div",{className:"text-blue-700 dark:text-blue-300",children:["Price: ",m," sats/",o,"($",(parseFloat(m)/1e8*S).toFixed(8),")"]}),t.jsx("div",{className:"text-blue-700 dark:text-blue-300",children:s==="buy"?`Spend: ${parseFloat(l)} FB → Get: ${(parseFloat(l)*1e8/parseFloat(m)).toLocaleString()} ${o}`:`Sell: ${parseFloat(l).toLocaleString()} ${o} → Get: ${(parseFloat(l)*parseFloat(m)/1e8).toFixed(8)} FB`})]})})]}),t.jsx("button",{onClick:Y,disabled:!m,className:"w-full mt-4 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:cursor-not-allowed",children:s==="buy"?"📋 Create Limit Buy Order":"📋 Create Limit Sell Order"})]})]}):t.jsx("div",{className:"space-y-4",children:h.map((w,k)=>{const F=k===0&&w.type!=="limit_order",L=w.type==="limit_order";return t.jsx("div",{className:`border rounded-lg p-4 dark:border-gray-600 transition-all ${F?"border-green-500 bg-green-50 dark:bg-green-900/10 dark:border-green-400":L?"border-gray-300 bg-gray-50 dark:bg-gray-700 dark:border-gray-600":"border-gray-200 bg-white dark:bg-gray-800"}`,children:t.jsxs("label",{className:"flex items-start cursor-pointer",children:[t.jsx("input",{type:"radio",name:"tradeOption",value:w.id,checked:u===w.id,onChange:_=>d(_.target.value),className:"mt-1 mr-3"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:`font-medium mb-1 flex items-center gap-2 ${F?"text-green-800 dark:text-green-200":""}`,children:[w.title,F&&t.jsx("span",{className:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 text-xs px-2 py-1 rounded-full font-medium",children:"Recommended"})]}),t.jsx("div",{className:`text-sm mb-3 ${F?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400"}`,children:w.description}),!L&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Average Price:"}),t.jsxs("div",{className:"ml-2 font-medium",children:[t.jsxs("div",{className:F?"text-green-800 dark:text-green-200":"",children:[Math.round(w.price*1e8)," sats/",o.split("•")[0]||o]}),t.jsxs("div",{className:"text-xs text-gray-500",children:["$",(w.price*S).toFixed(8)]})]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount:"}),t.jsx("span",{className:`ml-2 font-medium ${F?"text-green-800 dark:text-green-200":""}`,children:w.amount.toLocaleString()})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total:"}),t.jsxs("div",{className:"ml-2 font-medium",children:[t.jsxs("div",{className:F?"text-green-800 dark:text-green-200":"",children:[w.totalCost.toFixed(8)," FB"]}),t.jsxs("div",{className:"text-xs text-gray-500",children:["$",(w.totalCost*S).toFixed(2)]})]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Fees:"}),t.jsxs("div",{className:"ml-2 font-medium",children:[t.jsxs("div",{className:F?"text-green-800 dark:text-green-200":"",children:[w.fees.toFixed(8)," FB"]}),t.jsxs("div",{className:"text-xs text-gray-500",children:["$",(w.fees*S).toFixed(4)]})]})]})]}),w.executionPlan&&t.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:t.jsxs("div",{className:"text-sm",children:[t.jsx("div",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"🎯 Execution Strategy:"}),t.jsx("div",{className:"text-blue-700 dark:text-blue-300 mb-2",children:w.executionPlan.description}),w.executionPlan.routes&&w.executionPlan.routes.length>1&&t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"font-medium text-blue-800 dark:text-blue-200 text-xs",children:"Route Details:"}),w.executionPlan.routes.map((_,q)=>t.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400 flex justify-between",children:[t.jsxs("span",{children:[_.source==="orderbook"?"📋 Orderbook":"💧 Pool",":",(_.amount/parseFloat(l)*100).toFixed(0),"%"]}),t.jsxs("span",{children:[Math.round(_.price*1e8)," sats"]})]},q))]}),t.jsx("div",{className:"mt-2 pt-2 border-t border-blue-200 dark:border-blue-800",children:t.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:[t.jsx("div",{className:"font-medium mb-1",children:"Fee Breakdown:"}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"• Trading fees"}),t.jsxs("span",{children:[(w.fees*.6).toFixed(8)," FB"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"• Order splitting/routing"}),t.jsxs("span",{children:[(w.fees*.25).toFixed(8)," FB"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"• Relisting remainder"}),t.jsxs("span",{children:[(w.fees*.15).toFixed(8)," FB"]})]})]})]})})]})}),w.priceImpact&&w.priceImpact>0&&t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Price Impact:"}),t.jsxs("span",{className:`font-medium ${w.priceImpact>1?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:[w.priceImpact.toFixed(2),"%"]})]})]}),L&&u===w.id&&t.jsxs("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded",children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Your Desired Price (sats per ",o.split("•")[0]||o,")"]}),t.jsx("input",{type:"number",value:m,onChange:_=>y(_.target.value),className:"w-full p-2 border rounded dark:bg-gray-600 dark:border-gray-500",placeholder:"Enter price in sats",step:"1"}),m&&t.jsxs("div",{className:"mt-2 text-sm",children:[t.jsxs("div",{className:"text-gray-600 dark:text-gray-400",children:["Price: ",m," sats/",o.split("•")[0]||o," ($",(parseFloat(m)/1e8*S).toFixed(8),")"]}),t.jsxs("div",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["Total: ",s==="buy"?`${parseFloat(l)} FB for ${(parseFloat(l)/(parseFloat(m)/1e8)*1e8).toLocaleString()} ${o}`:`${parseFloat(l).toLocaleString()} ${o} for ${(parseFloat(l)*(parseFloat(m)/1e8)/1e8).toFixed(8)} FB`]})]})]})]})]})},w.id)})}),h.length>0&&t.jsx("button",{onClick:Y,disabled:!u||((pt=h.find(w=>w.id===u))==null?void 0:pt.type)==="limit_order"&&!m||h.length===1&&h[0].type==="limit_order"&&!m,className:`w-full mt-6 py-3 rounded-lg font-medium transition-colors ${h.length===1&&h[0].type==="limit_order"?"bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400":s==="buy"?"bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400":"bg-red-600 text-white hover:bg-red-700 disabled:bg-gray-400"} disabled:cursor-not-allowed`,children:h.length===1&&h[0].type==="limit_order"?s==="buy"?"📋 Create Limit Buy Order":"📋 Create Limit Sell Order":s==="buy"?"🟢 Execute Buy":"🔴 Execute Sell"})]}),v&&j&&t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 p-6 rounded-xl",children:[t.jsxs("h4",{className:"font-medium mb-3",children:["📊 Live Market Status for ",j.spacedRune]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-blue-600",children:"Orderbook"}),t.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:s==="buy"?v.hasLiveListings?"✅ Live listings available":"❌ No live listings":v.hasLiveBuyOrders?"✅ Live buy orders":"❌ No live buy orders"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-green-600",children:"Liquidity Pool"}),t.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:v.hasPoolLiquidity?`✅ ${v.poolLiquidity.toLocaleString()} available`:"❌ No pool liquidity"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-purple-600",children:"Best Price"}),t.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:s==="buy"?v.bestAskPrice?t.jsxs("div",{children:[t.jsxs("div",{children:[Math.round(v.bestAskPrice*1e8)," sats/",j.symbol||j.spacedRune]}),t.jsxs("div",{className:"text-xs",children:["$",(v.bestAskPrice*S).toFixed(8)]})]}):"No asks":v.bestBidPrice?t.jsxs("div",{children:[t.jsxs("div",{children:[Math.round(v.bestBidPrice*1e8)," sats/",j.symbol||j.spacedRune]}),t.jsxs("div",{className:"text-xs",children:["$",(v.bestBidPrice*S).toFixed(8)]})]}):"No bids"})]})]}),t.jsx("div",{className:"mt-4 pt-4 border-t border-blue-200 dark:border-blue-800",children:t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-xs",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Total Supply"}),t.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:$.formatRuneAmount(j.supply,j.divisibility)})]}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Holders"}),t.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:j.holders.toLocaleString()})]}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Transactions"}),t.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:j.transactions.toLocaleString()})]}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Status"}),t.jsx("div",{className:`${j.mintable?"text-green-600":"text-gray-600"} dark:text-gray-400`,children:j.mintable?"🟢 Mintable":"🔴 Complete"})]})]})}),t.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:t.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:["💡 ",t.jsx("strong",{children:"Price Discovery:"})," Prices are determined by live trading activity on our platform. As users trade, market prices will crystallize and reflect true demand."]})})]})]}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("span",{className:"text-2xl",children:"💱"})}),t.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Connect Wallet to Trade"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Access instant trades, liquidity provision, and limit orders"})]})},Xs=()=>{const{isConnected:n,account:e,runesBalances:r}=ae(),[s,a]=g.useState("pools"),[o,i]=g.useState([]),[l,c]=g.useState([]),[u,d]=g.useState(""),[h,f]=g.useState({rune:"",fb:""}),[v,x]=g.useState(25),[m,y]=g.useState({runeId:"",runeName:"",initialRuneAmount:"",initialFBAmount:""}),[A,P]=g.useState(!1);g.useEffect(()=>{n&&e&&S()},[n,e]);const S=async()=>{try{console.log("Loading liquidity pool data..."),c([]),i([]),console.log("Liquidity pool data loaded - no active pools yet")}catch(b){console.error("Failed to load LP data:",b)}},C=async()=>{var K;if(!m.runeId||!m.initialRuneAmount||!m.initialFBAmount){alert("Please fill all fields");return}if(!A){alert("Please acknowledge the risks before creating a pool");return}const b=parseFloat(m.initialRuneAmount),R=parseFloat(m.initialFBAmount);if(b<=0||R<=0){alert("Please enter valid amounts greater than 0");return}const j=r==null?void 0:r[m.runeName];if(j&&typeof j=="object"&&j!==null&&"amount"in j&&j.amount!==null){const U=Number(j.amount)/1e8;if(b>U){alert(`Insufficient ${m.runeName} balance. Available: ${U.toLocaleString()}`);return}}const B=l.find(U=>U.tokenA===m.runeName||U.tokenA===m.runeId||U.id.includes(m.runeName)||U.id.includes(m.runeId));if(B)if(window.confirm(`A liquidity pool for ${m.runeName}/FB already exists!

Current Pool Stats:
• TVL: ${B.tvl}
• APY: ${B.apy}%
• 24h Volume: ${B.volume24h}

Would you like to add liquidity to the existing pool instead of creating a new one?`)){d(B.id),f({rune:m.initialRuneAmount,fb:m.initialFBAmount}),a("add");return}else{alert("Pool creation cancelled. Each token pair can only have one liquidity pool.");return}if(window.confirm(`⚠️ FINAL CONFIRMATION ⚠️

You are about to create a new liquidity pool:

Token Pair: ${m.runeName} / FB
Your Contribution:
• ${b.toLocaleString()} ${m.runeName}
• ${R} FB

Initial Price: 1 ${m.runeName} = ${(R/b).toFixed(8)} FB

⚠️ RISKS:
• Impermanent loss if token prices diverge
• You'll be the sole liquidity provider initially
• Market price changes will affect your position

✅ REWARDS:
• Earn 10% of all trading fees from this pool
• Higher trading volume = higher rewards

Do you want to proceed with creating this pool?`))try{console.log("Creating new liquidity pool:",{tokenA:m.runeName,tokenB:"FB",initialAmountA:b,initialAmountB:R,initialPrice:R/b,creator:e==null?void 0:e.address}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);});const U=(K=document.querySelector('button[onclick*="handleCreatePool"]'))==null?void 0:K.textContent,de=document.querySelector('button[onclick*="handleCreatePool"]');de&&(de.textContent="🔄 Creating Pool...",de.disabled=!0);const{default:Ue}=await dt(async()=>{const{default:Q}=await import("./realWorldTradingService-CHhmuxSv.js");return{default:Q}},__vite__mapDeps([0,1,2])),be=await Ue.getInstance().createLiquidityPool({rune:m.runeName,runeId:m.runeId,initialRuneAmount:b,initialFBAmount:R,fee:30});console.log(`✅ Pool created successfully: ${be}`);const Y={id:be,tokenA:m.runeName,tokenB:"FB",reserveA:BigInt(Math.floor(b*1e8)),reserveB:BigInt(Math.floor(R*1e8)),totalLPShares:BigInt(Math.floor(Math.sqrt(b*R)*1e8)),fee:30,tvl:`${R} FB`,volume24h:"0 FB",apy:0};c(Q=>[Y,...Q]);const qe={poolId:Y.id,tokenA:m.runeName,tokenB:"FB",liquidityShares:Y.totalLPShares,tokenAAmount:Y.reserveA,tokenBAmount:Y.reserveB,accumulatedRewards:0n,apy:0,sharePercentage:100};i(Q=>[qe,...Q]),y({runeId:"",runeName:"",initialRuneAmount:"",initialFBAmount:""}),P(!1),alert(`🎉 Pool Created Successfully!

Your new ${m.runeName}/FB pool is now live!

• You own 100% of the pool initially
• Start earning fees as soon as trading begins
• Other users can now add liquidity to your pool

Check the "My Rewards" tab to monitor your earnings!`),a("rewards")}catch(U){console.error("Pool creation failed:",U),alert(`Failed to create pool: ${U.message||"Unknown error"}`)}},N=async()=>{if(!u||!h.rune||!h.fb){alert("Please select pool and enter amounts");return}try{console.log("Adding liquidity:",{pool:u,amounts:h}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}),alert("Add liquidity will be implemented with liquidityPoolOrchestrator service")}catch(b){console.error("Add liquidity failed:",b)}},$=async b=>{try{console.log("Claiming rewards for pool:",b),alert("Claim rewards will be implemented with liquidityPoolOrchestrator service")}catch(R){console.error("Claim rewards failed:",R)}};return n?t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-6",children:[{key:"pools",label:"💧 All Pools",icon:"💧"},{key:"add",label:"➕ Add Liquidity",icon:"➕"},{key:"remove",label:"➖ Remove Liquidity",icon:"➖"},{key:"create",label:"🆕 Create Pool",icon:"🆕"},{key:"rewards",label:"🎁 My Rewards",icon:"🎁"}].map(b=>t.jsx("button",{onClick:()=>a(b.key),className:`px-4 py-2 rounded-lg font-medium transition-all text-sm ${s===b.key?"bg-blue-600 text-white shadow-lg":"text-gray-600 dark:text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,children:b.label},b.key))}),s==="pools"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 p-6 rounded-xl",children:[t.jsx("h3",{className:"text-xl font-bold mb-2",children:"💧 AMM - Provide Liquidity"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Provide liquidity to Rune/FB pairs and earn 10% of trading fees proportional to your contribution"})]}),t.jsx("div",{className:"grid gap-4",children:l.map(b=>t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border dark:border-gray-700",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"text-lg font-semibold",children:[b.tokenA," / ",b.tokenB]}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Fee: ",b.fee/100,"% • TVL: ",b.tvl]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"text-lg font-bold text-green-600",children:[b.apy,"% APY"]}),t.jsxs("div",{className:"text-sm text-gray-600",children:["24h Vol: ",b.volume24h]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4 text-sm",children:[t.jsxs("div",{children:[t.jsxs("span",{className:"text-gray-600",children:["Reserve ",b.tokenA,":"]}),t.jsx("p",{className:"font-medium",children:(Number(b.reserveA)/1e8).toLocaleString()})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Reserve FB:"}),t.jsxs("p",{className:"font-medium",children:[(Number(b.reserveB)/1e8).toFixed(8)," FB"]})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{d(b.id),a("add")},className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"➕ Add Liquidity"}),t.jsx("button",{onClick:()=>{d(b.id),a("remove")},className:"flex-1 bg-gray-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-gray-700 transition-colors",children:"➖ Remove"})]})]},b.id))})]}),s==="add"&&t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:[t.jsx("h3",{className:"text-xl font-bold mb-4",children:"➕ Add Liquidity"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Pool"}),t.jsxs("select",{value:u,onChange:b=>d(b.target.value),className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600",children:[t.jsx("option",{value:"",children:"Choose a pool..."}),l.map(b=>t.jsxs("option",{value:b.id,children:[b.tokenA," / ",b.tokenB," (APY: ",b.apy,"% • TVL: ",b.tvl,")"]},b.id))]})]}),u&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium mb-2",children:"💡 Liquidity Provider Benefits"}),t.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[t.jsx("li",{children:"• Earn 10% of all trading fees from this pair"}),t.jsx("li",{children:"• Rewards distributed proportional to your LP share"}),t.jsx("li",{children:"• Automatic compounding of fee rewards"}),t.jsx("li",{children:"• Withdraw anytime (subject to price impact)"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Rune Amount"}),t.jsx("input",{type:"number",value:h.rune,onChange:b=>f(R=>({...R,rune:b.target.value})),className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600",placeholder:"0.00000000"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"FB Amount"}),t.jsx("input",{type:"number",value:h.fb,onChange:b=>f(R=>({...R,fb:b.target.value})),className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600",placeholder:"0.00000000"})]})]}),t.jsx("button",{onClick:N,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"➕ Add Liquidity & Start Earning"})]})]})]}),s==="create"&&t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:[t.jsx("h3",{className:"text-xl font-bold mb-4",children:"🆕 Create New Liquidity Pool"}),t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"w-6 h-6 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:t.jsx("span",{className:"text-red-600 dark:text-red-400 text-sm",children:"⚠️"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-red-800 dark:text-red-200 mb-2",children:"Important: Impermanent Loss Risk"}),t.jsxs("div",{className:"text-sm text-red-700 dark:text-red-300 space-y-2",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Impermanent Loss"})," occurs when the price ratio of your deposited tokens changes compared to when you deposited them."]}),t.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[t.jsx("li",{children:"If one token's price increases significantly vs the other, you may have less total value than holding tokens separately"}),t.jsx("li",{children:"The larger the price change, the greater the impermanent loss"}),t.jsx("li",{children:"You earn trading fees (10% of platform fees) which may offset impermanent loss"}),t.jsx("li",{children:'Loss becomes "permanent" only when you withdraw liquidity'})]}),t.jsx("p",{className:"font-medium",children:"💡 Best for: Token pairs you believe will maintain similar price movements"})]})]})]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Rune Token"}),t.jsxs("select",{value:m.runeId,onChange:b=>{const R=b.target.value,j=Object.keys(r||{}).find(M=>{if(M===R)return!0;const K=r==null?void 0:r[M];return K&&typeof K=="object"&&"runeId"in K&&K.runeId===R})||R;y(M=>({...M,runeId:R,runeName:j}));const B=l.find(M=>M.tokenA===j||M.tokenA===R);B&&setTimeout(()=>{window.confirm(`A pool for ${j}/FB already exists! Would you like to add liquidity to the existing pool instead?`)&&(d(B.id),a("add"))},100)},className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600",children:[t.jsx("option",{value:"",children:"Choose a Rune from your wallet..."}),r&&Object.entries(r).map(([b,R])=>t.jsxs("option",{value:typeof R=="object"&&R&&"runeId"in R?R.runeId:b,children:[b," (Balance: ",typeof R=="object"&&R&&"amount"in R?(Number(R.amount)/1e8).toLocaleString():"N/A",")"]},b))]}),!r||Object.keys(r).length===0&&t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"No Runes found in your wallet. Make sure your wallet is connected and has Fractal Bitcoin Runes."})]}),m.runeId&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[t.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-200 mb-3",children:"💭 Set Your Price Prediction"}),t.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-4",children:"Set the initial price ratio based on your market prediction. This determines how much FB you'll need to pair with your Runes."}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Your ",m.runeName," Amount"]}),t.jsx("input",{type:"number",value:m.initialRuneAmount,onChange:b=>{const R=b.target.value;if(y(j=>({...j,initialRuneAmount:R})),R&&!m.initialFBAmount){const j=(parseFloat(R)/1e6).toFixed(8);y(B=>({...B,initialFBAmount:j}))}},className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600",placeholder:"0.00000000",max:(()=>{const b=r==null?void 0:r[m.runeName];if(!(!b||typeof b!="object"||b===null||!("amount"in b)||b.amount===null))return(Number(b.amount)/1e8).toString()})()}),(()=>{const b=r==null?void 0:r[m.runeName];return!b||typeof b!="object"||b===null||!("amount"in b)||b.amount===null?null:t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Available: ",(Number(b.amount)/1e8).toLocaleString()," ",m.runeName]})})()]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Paired FB Amount"}),t.jsx("input",{type:"number",value:m.initialFBAmount,onChange:b=>y(R=>({...R,initialFBAmount:b.target.value})),className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600",placeholder:"0.00000000"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This sets your predicted price ratio"})]})]}),m.initialRuneAmount&&m.initialFBAmount&&t.jsxs("div",{className:"mt-4 p-3 bg-white dark:bg-gray-800 rounded-lg border",children:[t.jsx("h5",{className:"font-medium mb-2",children:"📊 Your Price Prediction:"}),t.jsxs("div",{className:"text-sm space-y-1",children:[t.jsxs("p",{children:[t.jsxs("strong",{children:["1 ",m.runeName]})," = "," ",t.jsxs("strong",{children:[(parseFloat(m.initialFBAmount)/parseFloat(m.initialRuneAmount)).toFixed(8)," FB"]})]}),t.jsxs("p",{children:[t.jsx("strong",{children:"1 FB"})," = "," ",t.jsxs("strong",{children:[(parseFloat(m.initialRuneAmount)/parseFloat(m.initialFBAmount)).toFixed(2)," ",m.runeName]})]})]})]})]}),t.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"w-6 h-6 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:t.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 text-sm",children:"📈"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-yellow-800 dark:text-yellow-200 mb-2",children:"Market Price Change Impact"}),t.jsxs("div",{className:"text-sm text-yellow-700 dark:text-yellow-300 space-y-2",children:[t.jsx("p",{children:t.jsxs("strong",{children:["If ",m.runeName," price goes UP vs FB:"]})}),t.jsxs("ul",{className:"list-disc list-inside ml-2 space-y-1",children:[t.jsxs("li",{children:["Your pool will have less ",m.runeName," and more FB"]}),t.jsxs("li",{children:["You'll miss some upside compared to just holding ",m.runeName]}),t.jsx("li",{children:"But you'll earn trading fees from increased activity"})]}),t.jsx("p",{children:t.jsxs("strong",{children:["If ",m.runeName," price goes DOWN vs FB:"]})}),t.jsxs("ul",{className:"list-disc list-inside ml-2 space-y-1",children:[t.jsxs("li",{children:["Your pool will have more ",m.runeName," and less FB"]}),t.jsxs("li",{children:["You'll be somewhat protected compared to just holding ",m.runeName]}),t.jsx("li",{children:"Trading fees continue to accumulate"})]}),t.jsx("p",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"💡 The automated market maker keeps the pool balanced, which creates this trade-off"})]})]})]})}),t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[t.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200 mb-2",children:"💰 Liquidity Provider Rewards"}),t.jsxs("div",{className:"text-sm text-green-700 dark:text-green-300 space-y-1",children:[t.jsxs("p",{children:["• Earn ",t.jsx("strong",{children:"10% of all trading fees"})," from your pool"]}),t.jsx("p",{children:"• Fees are distributed proportionally to your liquidity share"}),t.jsx("p",{children:"• Rewards auto-compound and can be claimed anytime"}),t.jsx("p",{children:"• Higher trading volume = higher rewards"})]})]}),t.jsxs("div",{className:"pt-4",children:[t.jsx("button",{onClick:C,disabled:!m.initialRuneAmount||!m.initialFBAmount||!A,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed text-white py-4 px-6 rounded-lg font-medium transition-all shadow-lg",children:"🆕 Create Pool & Provide Initial Liquidity"}),(!m.initialRuneAmount||!m.initialFBAmount)&&t.jsx("p",{className:"text-sm text-gray-500 text-center mt-2",children:"Please enter both token amounts to create the pool"}),m.initialRuneAmount&&m.initialFBAmount&&!A&&t.jsx("p",{className:"text-sm text-gray-500 text-center mt-2",children:"Please acknowledge the risks to proceed"})]}),t.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-sm",children:t.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:A,onChange:b=>P(b.target.checked),className:"mt-1 rounded border-gray-300 dark:border-gray-600"}),t.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["I understand the risks of impermanent loss and market price changes. I acknowledge that providing liquidity involves risk and that I may receive less value than holding tokens separately, especially during high volatility periods.",t.jsx("strong",{className:"text-red-600 dark:text-red-400",children:" I accept full responsibility for any losses."})]})]})})]})]})]})]}),s==="rewards"&&t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:[t.jsx("h3",{className:"text-xl font-bold mb-4",children:"🎁 My Liquidity Rewards"}),t.jsx("div",{className:"space-y-4",children:o.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("span",{className:"text-2xl",children:"💧"})}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No liquidity positions found"}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Add liquidity to start earning rewards"})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 p-6 rounded-lg",children:[t.jsx("h4",{className:"font-medium mb-2",children:"💰 Total Accumulated Rewards"}),t.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[o.reduce((b,R)=>b+Number(R.accumulatedRewards),0)/1e8," FB"]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"From 10% of platform trading fees • Auto-compounding"})]}),o.map(b=>t.jsxs("div",{className:"border rounded-lg p-4 dark:border-gray-600",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("h4",{className:"font-medium",children:[b.tokenA," / ",b.tokenB]}),t.jsxs("span",{className:"text-sm bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 px-3 py-1 rounded-full",children:[b.apy,"% APY"]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Your Pool Share:"}),t.jsxs("p",{className:"font-medium",children:[b.sharePercentage.toFixed(2),"%"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Pending Rewards:"}),t.jsxs("p",{className:"font-medium text-green-600",children:[(Number(b.accumulatedRewards)/1e8).toFixed(8)," FB"]})]})]}),t.jsx("button",{onClick:()=>$(b.poolId),className:"w-full bg-green-600 text-white py-2 rounded-lg font-medium hover:bg-green-700 transition-colors",children:"🎁 Claim Rewards"})]},b.poolId))]})})]})]}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"mb-4",children:t.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("span",{className:"text-2xl",children:"💧"})})}),t.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Connect Wallet to Provide Liquidity"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Provide liquidity to earn 10% of platform trading fees"})]})};function ir(n,e){return function(){return n.apply(e,arguments)}}const{toString:Js}=Object.prototype,{getPrototypeOf:ut}=Object,{iterator:Be,toStringTag:lr}=Symbol,Te=(n=>e=>{const r=Js.call(e);return n[r]||(n[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),X=n=>(n=n.toLowerCase(),e=>Te(e)===n),Le=n=>e=>typeof e===n,{isArray:le}=Array,pe=Le("undefined");function Ys(n){return n!==null&&!pe(n)&&n.constructor!==null&&!pe(n.constructor)&&z(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const cr=X("ArrayBuffer");function Gs(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&cr(n.buffer),e}const Qs=Le("string"),z=Le("function"),dr=Le("number"),Oe=n=>n!==null&&typeof n=="object",Zs=n=>n===!0||n===!1,ve=n=>{if(Te(n)!=="object")return!1;const e=ut(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(lr in n)&&!(Be in n)},en=X("Date"),tn=X("File"),rn=X("Blob"),sn=X("FileList"),nn=n=>Oe(n)&&z(n.pipe),an=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||z(n.append)&&((e=Te(n))==="formdata"||e==="object"&&z(n.toString)&&n.toString()==="[object FormData]"))},on=X("URLSearchParams"),[ln,cn,dn,un]=["ReadableStream","Request","Response","Headers"].map(X),hn=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ge(n,e,{allOwnKeys:r=!1}={}){if(n===null||typeof n>"u")return;let s,a;if(typeof n!="object"&&(n=[n]),le(n))for(s=0,a=n.length;s<a;s++)e.call(null,n[s],s,n);else{const o=r?Object.getOwnPropertyNames(n):Object.keys(n),i=o.length;let l;for(s=0;s<i;s++)l=o[s],e.call(null,n[l],l,n)}}function ur(n,e){e=e.toLowerCase();const r=Object.keys(n);let s=r.length,a;for(;s-- >0;)if(a=r[s],e===a.toLowerCase())return a;return null}const re=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:globalThis,hr=n=>!pe(n)&&n!==re;function Ye(){const{caseless:n}=hr(this)&&this||{},e={},r=(s,a)=>{const o=n&&ur(e,a)||a;ve(e[o])&&ve(s)?e[o]=Ye(e[o],s):ve(s)?e[o]=Ye({},s):le(s)?e[o]=s.slice():e[o]=s};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&ge(arguments[s],r);return e}const mn=(n,e,r,{allOwnKeys:s}={})=>(ge(e,(a,o)=>{r&&z(a)?n[o]=ir(a,r):n[o]=a},{allOwnKeys:s}),n),fn=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),pn=(n,e,r,s)=>{n.prototype=Object.create(e.prototype,s),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),r&&Object.assign(n.prototype,r)},gn=(n,e,r,s)=>{let a,o,i;const l={};if(e=e||{},n==null)return e;do{for(a=Object.getOwnPropertyNames(n),o=a.length;o-- >0;)i=a[o],(!s||s(i,n,e))&&!l[i]&&(e[i]=n[i],l[i]=!0);n=r!==!1&&ut(n)}while(n&&(!r||r(n,e))&&n!==Object.prototype);return e},xn=(n,e,r)=>{n=String(n),(r===void 0||r>n.length)&&(r=n.length),r-=e.length;const s=n.indexOf(e,r);return s!==-1&&s===r},yn=n=>{if(!n)return null;if(le(n))return n;let e=n.length;if(!dr(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=n[e];return r},bn=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&ut(Uint8Array)),wn=(n,e)=>{const s=(n&&n[Be]).call(n);let a;for(;(a=s.next())&&!a.done;){const o=a.value;e.call(n,o[0],o[1])}},vn=(n,e)=>{let r;const s=[];for(;(r=n.exec(e))!==null;)s.push(r);return s},kn=X("HTMLFormElement"),jn=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,a){return s.toUpperCase()+a}),Pt=(({hasOwnProperty:n})=>(e,r)=>n.call(e,r))(Object.prototype),Nn=X("RegExp"),mr=(n,e)=>{const r=Object.getOwnPropertyDescriptors(n),s={};ge(r,(a,o)=>{let i;(i=e(a,o,n))!==!1&&(s[o]=i||a)}),Object.defineProperties(n,s)},Sn=n=>{mr(n,(e,r)=>{if(z(n)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=n[r];if(z(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Cn=(n,e)=>{const r={},s=a=>{a.forEach(o=>{r[o]=!0})};return le(n)?s(n):s(String(n).split(e)),r},Rn=()=>{},An=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function Fn(n){return!!(n&&z(n.append)&&n[lr]==="FormData"&&n[Be])}const Pn=n=>{const e=new Array(10),r=(s,a)=>{if(Oe(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[a]=s;const o=le(s)?[]:{};return ge(s,(i,l)=>{const c=r(i,a+1);!pe(c)&&(o[l]=c)}),e[a]=void 0,o}}return s};return r(n,0)},$n=X("AsyncFunction"),En=n=>n&&(Oe(n)||z(n))&&z(n.then)&&z(n.catch),fr=((n,e)=>n?setImmediate:e?((r,s)=>(re.addEventListener("message",({source:a,data:o})=>{a===re&&o===r&&s.length&&s.shift()()},!1),a=>{s.push(a),re.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",z(re.postMessage)),Bn=typeof queueMicrotask<"u"?queueMicrotask.bind(re):typeof process<"u"&&process.nextTick||fr,Tn=n=>n!=null&&z(n[Be]),p={isArray:le,isArrayBuffer:cr,isBuffer:Ys,isFormData:an,isArrayBufferView:Gs,isString:Qs,isNumber:dr,isBoolean:Zs,isObject:Oe,isPlainObject:ve,isReadableStream:ln,isRequest:cn,isResponse:dn,isHeaders:un,isUndefined:pe,isDate:en,isFile:tn,isBlob:rn,isRegExp:Nn,isFunction:z,isStream:nn,isURLSearchParams:on,isTypedArray:bn,isFileList:sn,forEach:ge,merge:Ye,extend:mn,trim:hn,stripBOM:fn,inherits:pn,toFlatObject:gn,kindOf:Te,kindOfTest:X,endsWith:xn,toArray:yn,forEachEntry:wn,matchAll:vn,isHTMLForm:kn,hasOwnProperty:Pt,hasOwnProp:Pt,reduceDescriptors:mr,freezeMethods:Sn,toObjectSet:Cn,toCamelCase:jn,noop:Rn,toFiniteNumber:An,findKey:ur,global:re,isContextDefined:hr,isSpecCompliantForm:Fn,toJSONObject:Pn,isAsyncFn:$n,isThenable:En,setImmediate:fr,asap:Bn,isIterable:Tn};function E(n,e,r,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}p.inherits(E,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:p.toJSONObject(this.config),code:this.code,status:this.status}}});const pr=E.prototype,gr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{gr[n]={value:n}});Object.defineProperties(E,gr);Object.defineProperty(pr,"isAxiosError",{value:!0});E.from=(n,e,r,s,a,o)=>{const i=Object.create(pr);return p.toFlatObject(n,i,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),E.call(i,n.message,e,r,s,a),i.cause=n,i.name=n.name,o&&Object.assign(i,o),i};const Ln=null;function Ge(n){return p.isPlainObject(n)||p.isArray(n)}function xr(n){return p.endsWith(n,"[]")?n.slice(0,-2):n}function $t(n,e,r){return n?n.concat(e).map(function(a,o){return a=xr(a),!r&&o?"["+a+"]":a}).join(r?".":""):e}function On(n){return p.isArray(n)&&!n.some(Ge)}const In=p.toFlatObject(p,{},null,function(e){return/^is[A-Z]/.test(e)});function Ie(n,e,r){if(!p.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,r=p.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,y){return!p.isUndefined(y[m])});const s=r.metaTokens,a=r.visitor||d,o=r.dots,i=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&p.isSpecCompliantForm(e);if(!p.isFunction(a))throw new TypeError("visitor must be a function");function u(x){if(x===null)return"";if(p.isDate(x))return x.toISOString();if(p.isBoolean(x))return x.toString();if(!c&&p.isBlob(x))throw new E("Blob is not supported. Use a Buffer instead.");return p.isArrayBuffer(x)||p.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function d(x,m,y){let A=x;if(x&&!y&&typeof x=="object"){if(p.endsWith(m,"{}"))m=s?m:m.slice(0,-2),x=JSON.stringify(x);else if(p.isArray(x)&&On(x)||(p.isFileList(x)||p.endsWith(m,"[]"))&&(A=p.toArray(x)))return m=xr(m),A.forEach(function(S,C){!(p.isUndefined(S)||S===null)&&e.append(i===!0?$t([m],C,o):i===null?m:m+"[]",u(S))}),!1}return Ge(x)?!0:(e.append($t(y,m,o),u(x)),!1)}const h=[],f=Object.assign(In,{defaultVisitor:d,convertValue:u,isVisitable:Ge});function v(x,m){if(!p.isUndefined(x)){if(h.indexOf(x)!==-1)throw Error("Circular reference detected in "+m.join("."));h.push(x),p.forEach(x,function(A,P){(!(p.isUndefined(A)||A===null)&&a.call(e,A,p.isString(P)?P.trim():P,m,f))===!0&&v(A,m?m.concat(P):[P])}),h.pop()}}if(!p.isObject(n))throw new TypeError("data must be an object");return v(n),e}function Et(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function ht(n,e){this._pairs=[],n&&Ie(n,this,e)}const yr=ht.prototype;yr.append=function(e,r){this._pairs.push([e,r])};yr.toString=function(e){const r=e?function(s){return e.call(this,s,Et)}:Et;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function Mn(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function br(n,e,r){if(!e)return n;const s=r&&r.encode||Mn;p.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let o;if(a?o=a(e,r):o=p.isURLSearchParams(e)?e.toString():new ht(e,r).toString(s),o){const i=n.indexOf("#");i!==-1&&(n=n.slice(0,i)),n+=(n.indexOf("?")===-1?"?":"&")+o}return n}class Bt{constructor(){this.handlers=[]}use(e,r,s){return this.handlers.push({fulfilled:e,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){p.forEach(this.handlers,function(s){s!==null&&e(s)})}}const wr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_n=typeof URLSearchParams<"u"?URLSearchParams:ht,Un=typeof FormData<"u"?FormData:null,qn=typeof Blob<"u"?Blob:null,Wn={isBrowser:!0,classes:{URLSearchParams:_n,FormData:Un,Blob:qn},protocols:["http","https","file","blob","url","data"]},mt=typeof window<"u"&&typeof document<"u",Qe=typeof navigator=="object"&&navigator||void 0,Dn=mt&&(!Qe||["ReactNative","NativeScript","NS"].indexOf(Qe.product)<0),zn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Hn=mt&&window.location.href||"http://localhost",Vn=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:mt,hasStandardBrowserEnv:Dn,hasStandardBrowserWebWorkerEnv:zn,navigator:Qe,origin:Hn},Symbol.toStringTag,{value:"Module"})),W={...Vn,...Wn};function Kn(n,e){return Ie(n,new W.classes.URLSearchParams,Object.assign({visitor:function(r,s,a,o){return W.isNode&&p.isBuffer(r)?(this.append(s,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function Xn(n){return p.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Jn(n){const e={},r=Object.keys(n);let s;const a=r.length;let o;for(s=0;s<a;s++)o=r[s],e[o]=n[o];return e}function vr(n){function e(r,s,a,o){let i=r[o++];if(i==="__proto__")return!0;const l=Number.isFinite(+i),c=o>=r.length;return i=!i&&p.isArray(a)?a.length:i,c?(p.hasOwnProp(a,i)?a[i]=[a[i],s]:a[i]=s,!l):((!a[i]||!p.isObject(a[i]))&&(a[i]=[]),e(r,s,a[i],o)&&p.isArray(a[i])&&(a[i]=Jn(a[i])),!l)}if(p.isFormData(n)&&p.isFunction(n.entries)){const r={};return p.forEachEntry(n,(s,a)=>{e(Xn(s),a,r,0)}),r}return null}function Yn(n,e,r){if(p.isString(n))try{return(e||JSON.parse)(n),p.trim(n)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(n)}const xe={transitional:wr,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const s=r.getContentType()||"",a=s.indexOf("application/json")>-1,o=p.isObject(e);if(o&&p.isHTMLForm(e)&&(e=new FormData(e)),p.isFormData(e))return a?JSON.stringify(vr(e)):e;if(p.isArrayBuffer(e)||p.isBuffer(e)||p.isStream(e)||p.isFile(e)||p.isBlob(e)||p.isReadableStream(e))return e;if(p.isArrayBufferView(e))return e.buffer;if(p.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Kn(e,this.formSerializer).toString();if((l=p.isFileList(e))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Ie(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return o||a?(r.setContentType("application/json",!1),Yn(e)):e}],transformResponse:[function(e){const r=this.transitional||xe.transitional,s=r&&r.forcedJSONParsing,a=this.responseType==="json";if(p.isResponse(e)||p.isReadableStream(e))return e;if(e&&p.isString(e)&&(s&&!this.responseType||a)){const i=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(e)}catch(l){if(i)throw l.name==="SyntaxError"?E.from(l,E.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:W.classes.FormData,Blob:W.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};p.forEach(["delete","get","head","post","put","patch"],n=>{xe.headers[n]={}});const Gn=p.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Qn=n=>{const e={};let r,s,a;return n&&n.split(`
`).forEach(function(i){a=i.indexOf(":"),r=i.substring(0,a).trim().toLowerCase(),s=i.substring(a+1).trim(),!(!r||e[r]&&Gn[r])&&(r==="set-cookie"?e[r]?e[r].push(s):e[r]=[s]:e[r]=e[r]?e[r]+", "+s:s)}),e},Tt=Symbol("internals");function he(n){return n&&String(n).trim().toLowerCase()}function ke(n){return n===!1||n==null?n:p.isArray(n)?n.map(ke):String(n)}function Zn(n){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(n);)e[s[1]]=s[2];return e}const ea=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function We(n,e,r,s,a){if(p.isFunction(s))return s.call(this,e,r);if(a&&(e=r),!!p.isString(e)){if(p.isString(s))return e.indexOf(s)!==-1;if(p.isRegExp(s))return s.test(e)}}function ta(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,s)=>r.toUpperCase()+s)}function ra(n,e){const r=p.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(n,s+r,{value:function(a,o,i){return this[s].call(this,e,a,o,i)},configurable:!0})})}let H=class{constructor(e){e&&this.set(e)}set(e,r,s){const a=this;function o(l,c,u){const d=he(c);if(!d)throw new Error("header name must be a non-empty string");const h=p.findKey(a,d);(!h||a[h]===void 0||u===!0||u===void 0&&a[h]!==!1)&&(a[h||c]=ke(l))}const i=(l,c)=>p.forEach(l,(u,d)=>o(u,d,c));if(p.isPlainObject(e)||e instanceof this.constructor)i(e,r);else if(p.isString(e)&&(e=e.trim())&&!ea(e))i(Qn(e),r);else if(p.isObject(e)&&p.isIterable(e)){let l={},c,u;for(const d of e){if(!p.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[u=d[0]]=(c=l[u])?p.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}i(l,r)}else e!=null&&o(r,e,s);return this}get(e,r){if(e=he(e),e){const s=p.findKey(this,e);if(s){const a=this[s];if(!r)return a;if(r===!0)return Zn(a);if(p.isFunction(r))return r.call(this,a,s);if(p.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=he(e),e){const s=p.findKey(this,e);return!!(s&&this[s]!==void 0&&(!r||We(this,this[s],s,r)))}return!1}delete(e,r){const s=this;let a=!1;function o(i){if(i=he(i),i){const l=p.findKey(s,i);l&&(!r||We(s,s[l],l,r))&&(delete s[l],a=!0)}}return p.isArray(e)?e.forEach(o):o(e),a}clear(e){const r=Object.keys(this);let s=r.length,a=!1;for(;s--;){const o=r[s];(!e||We(this,this[o],o,e,!0))&&(delete this[o],a=!0)}return a}normalize(e){const r=this,s={};return p.forEach(this,(a,o)=>{const i=p.findKey(s,o);if(i){r[i]=ke(a),delete r[o];return}const l=e?ta(o):String(o).trim();l!==o&&delete r[o],r[l]=ke(a),s[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return p.forEach(this,(s,a)=>{s!=null&&s!==!1&&(r[a]=e&&p.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const s=new this(e);return r.forEach(a=>s.set(a)),s}static accessor(e){const s=(this[Tt]=this[Tt]={accessors:{}}).accessors,a=this.prototype;function o(i){const l=he(i);s[l]||(ra(a,i),s[l]=!0)}return p.isArray(e)?e.forEach(o):o(e),this}};H.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);p.reduceDescriptors(H.prototype,({value:n},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(s){this[r]=s}}});p.freezeMethods(H);function De(n,e){const r=this||xe,s=e||r,a=H.from(s.headers);let o=s.data;return p.forEach(n,function(l){o=l.call(r,o,a.normalize(),e?e.status:void 0)}),a.normalize(),o}function kr(n){return!!(n&&n.__CANCEL__)}function ce(n,e,r){E.call(this,n??"canceled",E.ERR_CANCELED,e,r),this.name="CanceledError"}p.inherits(ce,E,{__CANCEL__:!0});function jr(n,e,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?n(r):e(new E("Request failed with status code "+r.status,[E.ERR_BAD_REQUEST,E.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function sa(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function na(n,e){n=n||10;const r=new Array(n),s=new Array(n);let a=0,o=0,i;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),d=s[o];i||(i=u),r[a]=c,s[a]=u;let h=o,f=0;for(;h!==a;)f+=r[h++],h=h%n;if(a=(a+1)%n,a===o&&(o=(o+1)%n),u-i<e)return;const v=d&&u-d;return v?Math.round(f*1e3/v):void 0}}function aa(n,e){let r=0,s=1e3/e,a,o;const i=(u,d=Date.now())=>{r=d,a=null,o&&(clearTimeout(o),o=null),n.apply(null,u)};return[(...u)=>{const d=Date.now(),h=d-r;h>=s?i(u,d):(a=u,o||(o=setTimeout(()=>{o=null,i(a)},s-h)))},()=>a&&i(a)]}const Re=(n,e,r=3)=>{let s=0;const a=na(50,250);return aa(o=>{const i=o.loaded,l=o.lengthComputable?o.total:void 0,c=i-s,u=a(c),d=i<=l;s=i;const h={loaded:i,total:l,progress:l?i/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-i)/u:void 0,event:o,lengthComputable:l!=null,[e?"download":"upload"]:!0};n(h)},r)},Lt=(n,e)=>{const r=n!=null;return[s=>e[0]({lengthComputable:r,total:n,loaded:s}),e[1]]},Ot=n=>(...e)=>p.asap(()=>n(...e)),oa=W.hasStandardBrowserEnv?((n,e)=>r=>(r=new URL(r,W.origin),n.protocol===r.protocol&&n.host===r.host&&(e||n.port===r.port)))(new URL(W.origin),W.navigator&&/(msie|trident)/i.test(W.navigator.userAgent)):()=>!0,ia=W.hasStandardBrowserEnv?{write(n,e,r,s,a,o){const i=[n+"="+encodeURIComponent(e)];p.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),p.isString(s)&&i.push("path="+s),p.isString(a)&&i.push("domain="+a),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function la(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function ca(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Nr(n,e,r){let s=!la(e);return n&&(s||r==!1)?ca(n,e):e}const It=n=>n instanceof H?{...n}:n;function ne(n,e){e=e||{};const r={};function s(u,d,h,f){return p.isPlainObject(u)&&p.isPlainObject(d)?p.merge.call({caseless:f},u,d):p.isPlainObject(d)?p.merge({},d):p.isArray(d)?d.slice():d}function a(u,d,h,f){if(p.isUndefined(d)){if(!p.isUndefined(u))return s(void 0,u,h,f)}else return s(u,d,h,f)}function o(u,d){if(!p.isUndefined(d))return s(void 0,d)}function i(u,d){if(p.isUndefined(d)){if(!p.isUndefined(u))return s(void 0,u)}else return s(void 0,d)}function l(u,d,h){if(h in e)return s(u,d);if(h in n)return s(void 0,u)}const c={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(u,d,h)=>a(It(u),It(d),h,!0)};return p.forEach(Object.keys(Object.assign({},n,e)),function(d){const h=c[d]||a,f=h(n[d],e[d],d);p.isUndefined(f)&&h!==l||(r[d]=f)}),r}const Sr=n=>{const e=ne({},n);let{data:r,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:o,headers:i,auth:l}=e;e.headers=i=H.from(i),e.url=br(Nr(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(p.isFormData(r)){if(W.hasStandardBrowserEnv||W.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((c=i.getContentType())!==!1){const[u,...d]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];i.setContentType([u||"multipart/form-data",...d].join("; "))}}if(W.hasStandardBrowserEnv&&(s&&p.isFunction(s)&&(s=s(e)),s||s!==!1&&oa(e.url))){const u=a&&o&&ia.read(o);u&&i.set(a,u)}return e},da=typeof XMLHttpRequest<"u",ua=da&&function(n){return new Promise(function(r,s){const a=Sr(n);let o=a.data;const i=H.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=a,d,h,f,v,x;function m(){v&&v(),x&&x(),a.cancelToken&&a.cancelToken.unsubscribe(d),a.signal&&a.signal.removeEventListener("abort",d)}let y=new XMLHttpRequest;y.open(a.method.toUpperCase(),a.url,!0),y.timeout=a.timeout;function A(){if(!y)return;const S=H.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),N={data:!l||l==="text"||l==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:S,config:n,request:y};jr(function(b){r(b),m()},function(b){s(b),m()},N),y=null}"onloadend"in y?y.onloadend=A:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(A)},y.onabort=function(){y&&(s(new E("Request aborted",E.ECONNABORTED,n,y)),y=null)},y.onerror=function(){s(new E("Network Error",E.ERR_NETWORK,n,y)),y=null},y.ontimeout=function(){let C=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const N=a.transitional||wr;a.timeoutErrorMessage&&(C=a.timeoutErrorMessage),s(new E(C,N.clarifyTimeoutError?E.ETIMEDOUT:E.ECONNABORTED,n,y)),y=null},o===void 0&&i.setContentType(null),"setRequestHeader"in y&&p.forEach(i.toJSON(),function(C,N){y.setRequestHeader(N,C)}),p.isUndefined(a.withCredentials)||(y.withCredentials=!!a.withCredentials),l&&l!=="json"&&(y.responseType=a.responseType),u&&([f,x]=Re(u,!0),y.addEventListener("progress",f)),c&&y.upload&&([h,v]=Re(c),y.upload.addEventListener("progress",h),y.upload.addEventListener("loadend",v)),(a.cancelToken||a.signal)&&(d=S=>{y&&(s(!S||S.type?new ce(null,n,y):S),y.abort(),y=null)},a.cancelToken&&a.cancelToken.subscribe(d),a.signal&&(a.signal.aborted?d():a.signal.addEventListener("abort",d)));const P=sa(a.url);if(P&&W.protocols.indexOf(P)===-1){s(new E("Unsupported protocol "+P+":",E.ERR_BAD_REQUEST,n));return}y.send(o||null)})},ha=(n,e)=>{const{length:r}=n=n?n.filter(Boolean):[];if(e||r){let s=new AbortController,a;const o=function(u){if(!a){a=!0,l();const d=u instanceof Error?u:this.reason;s.abort(d instanceof E?d:new ce(d instanceof Error?d.message:d))}};let i=e&&setTimeout(()=>{i=null,o(new E(`timeout ${e} of ms exceeded`,E.ETIMEDOUT))},e);const l=()=>{n&&(i&&clearTimeout(i),i=null,n.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),n=null)};n.forEach(u=>u.addEventListener("abort",o));const{signal:c}=s;return c.unsubscribe=()=>p.asap(l),c}},ma=function*(n,e){let r=n.byteLength;if(r<e){yield n;return}let s=0,a;for(;s<r;)a=s+e,yield n.slice(s,a),s=a},fa=async function*(n,e){for await(const r of pa(n))yield*ma(r,e)},pa=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:r,value:s}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}=await e.read();if(r)break;yield s}}finally{await e.cancel()}},Mt=(n,e,r,s)=>{const a=fa(n,e);let o=0,i,l=c=>{i||(i=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}=await a.next();if(u){l(),c.close();return}let h=d.byteLength;if(r){let f=o+=h;r(f)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},Me=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Cr=Me&&typeof ReadableStream=="function",ga=Me&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),Rr=(n,...e)=>{try{return!!n(...e)}catch(err){return!1}},xa=Cr&&Rr(()=>{let n=!1;const e=new Request(W.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),_t=64*1024,Ze=Cr&&Rr(()=>p.isReadableStream(new Response("").body)),Ae={stream:Ze&&(n=>n.body)};Me&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Ae[e]&&(Ae[e]=p.isFunction(n[e])?r=>r[e]():(r,s)=>{throw new E(`Response type '${e}' is not supported`,E.ERR_NOT_SUPPORT,s)})})})(new Response);const ya=async n=>{if(n==null)return 0;if(p.isBlob(n))return n.size;if(p.isSpecCompliantForm(n))return(await new Request(W.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(p.isArrayBufferView(n)||p.isArrayBuffer(n))return n.byteLength;if(p.isURLSearchParams(n)&&(n=n+""),p.isString(n))return(await ga(n)).byteLength},ba=async(n,e)=>{const r=p.toFiniteNumber(n.getContentLength());return r??ya(e)},wa=Me&&(async n=>{let{url:e,method:r,data:s,signal:a,cancelToken:o,timeout:i,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:d,withCredentials:h="same-origin",fetchOptions:f}=Sr(n);u=u?(u+"").toLowerCase():"text";let v=ha([a,o&&o.toAbortSignal()],i),x;const m=v&&v.unsubscribe&&(()=>{v.unsubscribe()});let y;try{if(c&&xa&&r!=="get"&&r!=="head"&&(y=await ba(d,s))!==0){let N=new Request(e,{method:"POST",body:s,duplex:"half"}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}),$;if(p.isFormData(s)&&($=N.headers.get("content-type"))&&d.setContentType($),N.body){const[b,R]=Lt(y,Re(Ot(c)));s=Mt(N.body,_t,b,R)}}p.isString(h)||(h=h?"include":"omit");const A="credentials"in Request.prototype;x=new Request(e,{...f,signal:v,method:r.toUpperCase(),headers:d.normalize().toJSON(),body:s,duplex:"half",credentials:A?h:void 0});let P=await fetch(x,f);const S=Ze&&(u==="stream"||u==="response");if(Ze&&(l||S&&m)){const N={};["status","statusText","headers"].forEach(j=>{N[j]=P[j]});const $=p.toFiniteNumber(P.headers.get("content-length")),[b,R]=l&&Lt($,Re(Ot(l),!0))||[];P=new Response(Mt(P.body,_t,b,()=>{R&&R(),m&&m()}),N)}u=u||"text";let C=await Ae[p.findKey(Ae,u)||"text"](P,n);return!S&&m&&m(),await new Promise((N,$)=>{jr(N,$,{data:C,headers:H.from(P.headers),status:P.status,statusText:P.statusText,config:n,request:x})})}catch(A){throw m&&m(),A&&A.name==="TypeError"&&/Load failed|fetch/i.test(A.message)?Object.assign(new E("Network Error",E.ERR_NETWORK,n,x),{cause:A.cause||A}):E.from(A,A&&A.code,n,x)}}),et={http:Ln,xhr:ua,fetch:wa};p.forEach(et,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);})}catch(err){}Object.defineProperty(n,"adapterName",{value:e})}});const Ut=n=>`- ${n}`,va=n=>p.isFunction(n)||n===null||n===!1,Ar={getAdapter:n=>{n=p.isArray(n)?n:[n];const{length:e}=n;let r,s;const a={};for(let o=0;o<e;o++){r=n[o];let i;if(s=r,!va(r)&&(s=et[(i=String(r)).toLowerCase()],s===void 0))throw new E(`Unknown adapter '${i}'`);if(s)break;a[i||"#"+o]=s}if(!s){const o=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let i=e?o.length>1?`since :
`+o.map(Ut).join(`
`):" "+Ut(o[0]):"as no adapter specified";throw new E("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return s},adapters:et};function ze(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new ce(null,n)}function qt(n){return ze(n),n.headers=H.from(n.headers),n.data=De.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Ar.getAdapter(n.adapter||xe.adapter)(n).then(function(s){return ze(n),s.data=De.call(n,n.transformResponse,s),s.headers=H.from(s.headers),s},function(s){return kr(s)||(ze(n),s&&s.response&&(s.response.data=De.call(n,n.transformResponse,s.response),s.response.headers=H.from(s.response.headers))),Promise.reject(s)})}const Fr="1.10.0",_e={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{_e[n]=function(s){return typeof s===n||"a"+(e<1?"n ":" ")+n}});const Wt={};_e.transitional=function(e,r,s){function a(o,i){return"[Axios v"+Fr+"] Transitional option '"+o+"'"+i+(s?". "+s:"")}return(o,i,l)=>{if(e===!1)throw new E(a(i," has been removed"+(r?" in "+r:"")),E.ERR_DEPRECATED);return r&&!Wt[i]&&(Wt[i]=!0,console.warn(a(i," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(o,i,l):!0}};_e.spelling=function(e){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function ka(n,e,r){if(typeof n!="object")throw new E("options must be an object",E.ERR_BAD_OPTION_VALUE);const s=Object.keys(n);let a=s.length;for(;a-- >0;){const o=s[a],i=e[o];if(i){const l=n[o],c=l===void 0||i(l,o,n);if(c!==!0)throw new E("option "+o+" must be "+c,E.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new E("Unknown option "+o,E.ERR_BAD_OPTION)}}const je={assertOptions:ka,validators:_e},J=je.validators;let se=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Bt,response:new Bt}}async request(e,r){try{return await this._request(e,r)}catch(s){if(s instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const o=a.stack?a.stack.replace(/^.+\n/,""):"";try{s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}catch(err){}}throw s}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=ne(this.defaults,r);const{transitional:s,paramsSerializer:a,headers:o}=r;s!==void 0&&je.assertOptions(s,{silentJSONParsing:J.transitional(J.boolean),forcedJSONParsing:J.transitional(J.boolean),clarifyTimeoutError:J.transitional(J.boolean)},!1),a!=null&&(p.isFunction(a)?r.paramsSerializer={serialize:a}:je.assertOptions(a,{encode:J.function,serialize:J.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),je.assertOptions(r,{baseUrl:J.spelling("baseURL"),withXsrfToken:J.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=o&&p.merge(o.common,o[r.method]);o&&p.forEach(["delete","get","head","post","put","patch","common"],x=>{delete o[x]}),r.headers=H.concat(i,o);const l=[];let c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(r)===!1||(c=c&&m.synchronous,l.unshift(m.fulfilled,m.rejected))});const u=[];this.interceptors.response.forEach(function(m){u.push(m.fulfilled,m.rejected)});let d,h=0,f;if(!c){const x=[qt.bind(this),void 0];for(x.unshift.apply(x,l),x.push.apply(x,u),f=x.length,d=Promise.resolve(r);h<f;)d=d.then(x[h++],x[h++]);return d}f=l.length;let v=r;for(h=0;h<f;){const x=l[h++],m=l[h++];try{v=x(v)}catch(y){m.call(this,y);break}}try{d=qt.call(this,v)}catch(x){return Promise.reject(x)}for(h=0,f=u.length;h<f;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=ne(this.defaults,e);const r=Nr(e.baseURL,e.url,e.allowAbsoluteUrls);return br(r,e.params,e.paramsSerializer)}};p.forEach(["delete","get","head","options"],function(e){se.prototype[e]=function(r,s){return this.request(ne(s||{},{method:e,url:r,data:(s||{}).data}))}});p.forEach(["post","put","patch"],function(e){function r(s){return function(o,i,l){return this.request(ne(l||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}se.prototype[e]=r(),se.prototype[e+"Form"]=r(!0)});let ja=class Pr{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const s=this;this.promise.then(a=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](a);s._listeners=null}),this.promise.then=a=>{let o;const i=new Promise(l=>{s.subscribe(l),o=l}).then(a);return i.cancel=function(){s.unsubscribe(o)},i},e(function(o,i,l){s.reason||(s.reason=new ce(o,i,l),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=s=>{e.abort(s)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new Pr(function(a){e=a}),cancel:e}}};function Na(n){return function(r){return n.apply(null,r)}}function Sa(n){return p.isObject(n)&&n.isAxiosError===!0}const tt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(tt).forEach(([n,e])=>{tt[e]=n});function $r(n){const e=new se(n),r=ir(se.prototype.request,e);return p.extend(r,se.prototype,e,{allOwnKeys:!0}),p.extend(r,e,null,{allOwnKeys:!0}),r.create=function(a){return $r(ne(n,a))},r}const T=$r(xe);T.Axios=se;T.CanceledError=ce;T.CancelToken=ja;T.isCancel=kr;T.VERSION=Fr;T.toFormData=Ie;T.AxiosError=E;T.Cancel=T.CanceledError;T.all=function(e){return Promise.all(e)};T.spread=Na;T.isAxiosError=Sa;T.mergeConfig=ne;T.AxiosHeaders=H;T.formToJSON=n=>vr(p.isHTMLForm(n)?new FormData(n):n);T.getAdapter=Ar.getAdapter;T.HttpStatusCode=tt;T.default=T;const{Axios:Ga,AxiosError:Qa,CanceledError:Za,isCancel:eo,CancelToken:to,VERSION:ro,all:so,Cancel:no,isAxiosError:ao,spread:oo,toFormData:io,AxiosHeaders:lo,HttpStatusCode:co,formToJSON:uo,getAdapter:ho,mergeConfig:mo}=T;class Ca{constructor(e){I(this,"baseUrl");I(this,"apiToken",null);I(this,"liquidityPool");this.baseUrl="https://api-proxy.ddpurse.com",this.liquidityPool=e}async getBestSwapRoute(e,r,s,a){if(!this.liquidityPool)return{route:"orderbook",quote:null};try{const o=await this.liquidityPool.getBestPriceRoute(e,r,BigInt(s),a);return{route:o.route,quote:o.quote,savings:o.savings}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}}catch(o){return console.error("Error getting best route:",o),{route:"orderbook",quote:null}}}async executeRoutedSwap(e,r,s,a,o){var i;try{const l=await this.getBestSwapRoute(e,r,s,o);if(this.liquidityPool&&l.route==="pool"){const c=await this.liquidityPool.executeRoutedSwap(e,r,BigInt(s),a,o);return{success:c.success,route:c.route,outputAmount:(i=c.outputAmount)==null?void 0:i.toString(),error:c.error}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}}else return{success:!1,route:"orderbook",error:"Orderbook integration pending"}}catch(l){return{success:!1,error:l instanceof Error?l.message:"Unknown error"}}}async initializeApiToken(){try{const e=await T.get(`${this.baseUrl}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}/swap-info`);this.apiToken=e.data.nonce}catch(e){throw console.error("Failed to initialize API token:",e),new Error("Failed to initialize swap service")}}async getAvailableTokens(e,r=200){try{const s="https://open-api-fractal.unisat.io";console.log("Fetching from:",`${s}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}/v1/indexer/runes/info-list`);const a=e?500:r,o=100;let i=[];for(let c=0;c<a;c+=o)try{const u=await T.get(`${s}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}/v1/indexer/runes/info-list`,{params:{start:c,limit:o},timeout:15e3,headers:{Accept:"application/json","Content-Type":"application/json"}});if(u.data.code===0&&u.data.data&&u.data.data.detail){const d=u.data.data.detail;if(i.push(...d),d.length<o)break;e&&d.some(h=>h.spacedRune.toLowerCase().includes(e.toLowerCase()))&&console.log(`Found target rune "${e}" in batch ${c}-${c+o}`)}else break}catch(u){console.warn(`Failed to fetch batch ${c}-${c+o}:`,u);break}console.log(`Fetched ${i.length} total tokens from UniSat API`);let l=i.map(c=>{var u;return{tick:c.spacedRune,name:c.spacedRune,symbol:c.symbol,decimals:c.divisibility,supply:c.supply,holders:c.holders,mintable:c.mintable,burned:c.burned,runeId:c.runeid||((u=c.number)==null?void 0:u.toString())||c.spacedRune,number:c.number}});if(console.log("Raw rune data sample:",i.slice(0,2)),console.log("Processed tokens sample:",l.slice(0,2)),e&&e.trim()){const c=e.toLowerCase().trim();l=l.filter(u=>u.tick.toLowerCase().includes(c)||u.name.toLowerCase().includes(c)||u.symbol&&u.symbol.toLowerCase().includes(c)),console.log(`Filtered to ${l.length} tokens matching "${e}"`)}return console.log("Final tokens:",l.length,l.slice(0,3)),l}catch(s){return console.error("Failed to fetch Runes from UniSat API:",s),s.response&&(console.error("Response status:",s.response.status),console.error("Response data:",s.response.data)),[]}}async searchRunes(e){return!e||e.trim().length<2?this.getAvailableTokens():this.getAvailableTokens(e)}async getSwapQuote(e,r,s,a=.5){try{const i=(await T.post(`${this.baseUrl}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}/brc20swap/quote`,{from_token:e==="FB"?"BTC":e,to_token:r==="FB"?"BTC":r,amount:s,slippage:a})).data.data;return{fromToken:e==="FB"?"FB":{tick:e},toToken:r==="FB"?"FB":{tick:r},fromAmount:s,toAmount:i.to_amount,rate:i.rate,slippage:a,fee:i.fee,estimatedGas:i.gas_estimate}}catch(o){console.error("Traditional swap API failed, analyzing listings:",o);const i=await this.analyzeSwapOptions(e,r,s);if(i.bestOption&&i.bestOption.feasible){const c=parseFloat(i.bestOption.totalAmount)/parseFloat(i.bestOption.totalCost);return{fromToken:e==="FB"?"FB":{tick:e},toToken:r==="FB"?"FB":{tick:r},fromAmount:i.bestOption.totalCost,toAmount:i.bestOption.totalAmount,rate:c.toString(),slippage:a,fee:"0.0001",estimatedGas:"1000"}}const l=i.marketDepth.totalLiquidity;throw i.options.length,parseFloat(l)>0?new Error(`Insufficient liquidity for ${s} ${r}. Available: ${this.formatAmount(l)} ${r} across ${i.marketDepth.listingCount} listings. Try a smaller amount.`):new Error(`No marketplace listings found for ${r}. This token may not have active sellers on the Fractal Bitcoin marketplace yet. Prices are based on real user listings, not synthetic rates.`)}}async analyzeSwapOptions(e,r,s){const a=parseFloat(s),o=await this.getTokenListings(r);if(console.log(`Found ${o.length} listings for ${r}:`,o),o.length===0)return{requestedAmount:s,requestedToken:e,targetToken:r,options:[],alternativeAmounts:[],marketDepth:{totalLiquidity:"0",averagePrice:"0",priceRange:{min:"0",max:"0"},listingCount:0}};const i=o.sort((x,m)=>parseFloat(x.price)-parseFloat(m.price));console.log(`Sorted ${i.length} listings by price for ${r}`);const l=[];if(e==="FB"){console.log(`Calculating tokens available for ${a} FB`);const x=this.findAffordableCombination(i,a);x&&l.push(x);const m=this.suggestAlternativeFBAmounts(i,a);return{requestedAmount:s,requestedToken:e,targetToken:r,options:l.slice(0,6),bestOption:l[0],alternativeAmounts:m.slice(0,5),marketDepth:this.calculateMarketDepth(o)}}const c=i.find(x=>Math.abs(parseFloat(x.amount)-a)<.001);c&&(console.log(`Found exact match: ${c.amount} ${r}`),l.push({type:"exact",description:`Exact match: ${this.formatAmount(c.amount)} ${r}`,listings:[c],totalAmount:c.amount,totalCost:(parseFloat(c.amount)*parseFloat(c.price)).toString(),averagePrice:c.price,priceImpact:0,feasible:!0}));const u=i.filter(x=>parseFloat(x.amount)>a).slice(0,3);console.log(`Found ${u.length} partial options for ${a} ${r}`),u.forEach((x,m)=>{const y=a*parseFloat(x.price);console.log(`Partial option ${m+1}: Buy ${a} from ${x.amount} available at ${x.price}`),l.push({type:"partial",description:`Buy ${this.formatAmount(a.toString())} from ${this.formatAmount(x.amount)} available`,listings:[x],totalAmount:a.toString(),totalCost:y.toString(),averagePrice:x.price,priceImpact:0,feasible:!0,reason:`Seller has ${this.formatAmount(x.amount)} available, you can buy ${this.formatAmount(a.toString())}`})});const d=this.findBestCombination(i,a);d&&l.push(d);const h=this.suggestAlternativeAmounts(i,a);h.forEach(x=>{const m=parseFloat(x),y=this.findBestCombination(i,m);y&&l.push({...y,type:"alternative",description:`Alternative: ${this.formatAmount(x)} ${r} (${this.getAmountDifference(a,m)})`})});const f=l.length>0?l.reduce((x,m)=>{const y=parseFloat(x.averagePrice);return parseFloat(m.averagePrice)<y?m:x},l[0]):void 0,v=this.calculateMarketDepth(o);return{requestedAmount:s,requestedToken:e,targetToken:r,options:l.slice(0,6),bestOption:f,alternativeAmounts:h.slice(0,5),marketDepth:v}}async getTokenListings(e,r=100){try{console.log(`Fetching real marketplace listings for token: ${e}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}`);const s="https://open-api-fractal.unisat.io",o=(await this.getAvailableTokens(e,1)).find(l=>l.tick===e);if(!o)return console.log(`Token ${e} not found in available tokens`),[];console.log(`Found token ${e} with runeid: ${o.runeId}`);const i=[`/v1/indexer/runes/${o.runeId}/listings`,`/v1/market/runes/${o.runeId}/listings`,`/v1/indexer/runes/listings?runeId=${o.runeId}`,`/v1/indexer/runes/${encodeURIComponent(e)}/listings`];for(const l of i)try{console.log(`Trying endpoint: ${s}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}${l}`);const c=await T.get(`${s}${l}`,{params:{limit:r},timeout:1e4,headers:{Accept:"application/json","Content-Type":"application/json"}});if(c.data.code===0&&c.data.data&&Array.isArray(c.data.data)){const u=c.data.data.map(d=>({id:d.id||d.inscriptionId,tick:e,amount:d.amount,price:d.price||d.unitPrice,seller:d.seller||d.address,timestamp:d.timestamp,status:d.status||"active",batchSize:d.amount}));return console.log(`✅ Found ${u.length} real marketplace listings for ${e}`),console.log("Sample listing:",u[0]),u}}catch(c){console.log(`Endpoint ${l} failed:`,c.message);continue}return console.log(`❌ No marketplace listings found for ${e} on any endpoint`),[]}catch(s){return console.error(`Failed to fetch marketplace listings for ${e}:`,s),[]}}findAffordableCombination(e,r){let s=r,a=0;const o=[];for(const i of e){if(s<=0)break;const l=parseFloat(i.amount),c=parseFloat(i.price),u=l*c;if(u<=s)o.push(i),a+=l,s-=u;else{const d=s/c;if(d>0){const h={...i,amount:d.toString(),batchSize:i.amount};o.push(h),a+=d,s=0}}}if(a>0){const i=r-s,l=i/a;return{type:"multiple",description:`Buy ${this.formatAmount(a.toString())} tokens with ${this.formatAmount(i.toString())} FB`,listings:o,totalAmount:a.toString(),totalCost:i.toString(),averagePrice:l.toString(),priceImpact:this.calculateListingPriceImpact(o),feasible:!0}}return null}suggestAlternativeFBAmounts(e,r){const s=[];e.forEach(i=>{const l=parseFloat(i.amount)*parseFloat(i.price);l!==r&&l>0&&s.push(l)});const a=[.01,.05,.1,.2,.5,1].filter(i=>i!==r);return s.push(...a),[...new Set(s)].filter(i=>i>0).sort((i,l)=>Math.abs(i-r)-Math.abs(l-r)).slice(0,5).map(i=>i.toString())}findBestCombination(e,r){const s=[];let a=r,o=0;for(const l of e){if(a<=0)break;const c=parseFloat(l.amount),u=parseFloat(l.price);if(c<=a)s.push(l),a-=c,o+=c*u;else{const d={...l,amount:a.toString(),batchSize:l.amount};s.push(d),o+=a*u,a=0}}if(a>0){const l=r-a,c=l/r*100;return{type:"multiple",description:`Partial fulfillment: ${this.formatAmount(l.toString())} (${c.toFixed(1)}% of requested)`,listings:s,totalAmount:l.toString(),totalCost:o.toString(),averagePrice:(o/l).toString(),priceImpact:this.calculateListingPriceImpact(s),feasible:c>=80,reason:`${c.toFixed(1)}% of requested amount available in current listings`}}const i=o/r;return{type:"multiple",description:`Combine ${s.length} listing${s.length>1?"s":""}`,listings:s,totalAmount:r.toString(),totalCost:o.toString(),averagePrice:i.toString(),priceImpact:this.calculateListingPriceImpact(s),feasible:!0}}suggestAlternativeAmounts(e,r){const s=e.map(c=>parseFloat(c.amount)),a=[],o=r*.2;s.forEach(c=>{const u=Math.abs(c-r);u<=o&&u>0&&a.push(c)});const i=[Math.floor(r/1e3)*1e3,Math.ceil(r/1e3)*1e3,Math.floor(r/500)*500,Math.ceil(r/500)*500,Math.floor(r/100)*100,Math.ceil(r/100)*100].filter(c=>c>0&&c!==r);return a.push(...i),[...new Set(a)].sort((c,u)=>Math.abs(c-r)-Math.abs(u-r)).slice(0,5).map(c=>c.toString())}calculateListingPriceImpact(e){if(e.length<=1)return 0;const r=e.map(o=>parseFloat(o.price)),s=Math.min(...r);return(Math.max(...r)-s)/s*100}calculateMarketDepth(e){if(e.length===0)return{totalLiquidity:"0",averagePrice:"0",priceRange:{min:"0",max:"0"},listingCount:0};const r=e.reduce((o,i)=>o+parseFloat(i.amount),0),s=e.map(o=>parseFloat(o.price)),a=s.reduce((o,i)=>o+i,0)/s.length;return{totalLiquidity:r.toString(),averagePrice:a.toString(),priceRange:{min:Math.min(...s).toString(),max:Math.max(...s).toString()},listingCount:e.length}}getAmountDifference(e,r){const s=r-e,a=Math.abs(s)/e*100;return s>0?`+${a.toFixed(1)}% more`:`-${a.toFixed(1)}% less`}getMockQuote(e,r,s,a){const o=parseFloat(s),i={FB_to_rune:1e6,rune_to_FB:1e-6,rune_to_rune:1};let l,c;e==="FB"&&r!=="FB"?(l=i.FB_to_rune,c=o*l):e!=="FB"&&r==="FB"?(l=i.rune_to_FB,c=o*l):(l=i.rune_to_rune,c=o*l);const u=1-a/100;return c=c*u,{fromToken:e==="FB"?"FB":{tick:e},toToken:r==="FB"?"FB":{tick:r},fromAmount:s,toAmount:c.toString(),rate:l.toString(),slippage:a,fee:"0.0001",estimatedGas:"1000"}}async getSwapPSBT(e){this.apiToken||await this.initializeApiToken();try{const s=(await T.post(`${this.baseUrl}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}/brc20swap/get_swap_psbt2`,{token:e.token==="FB"?"BTC":e.token,tick:e.tick==="FB"?"BTC":e.tick,address:e.address,amount:e.amount,slippage:e.slippage,fee_rate:e.feeRate},{headers:{Authorization:`Bearer ${this.apiToken}`,"Content-Type":"application/json"}})).data.data;return{psbt:s.psbt,nonce:s.nonce,expiresAt:Date.now()+"60000"}}catch(r){throw console.error("Failed to get PSBT:",r),new Error("Failed to create swap transaction")}}async submitSwapPSBT(e,r){try{const a=(await T.post(`${this.baseUrl}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}/brc20swap/send_swap_psbt`,{psbt:e,nonce:r},{headers:{Authorization:`Bearer ${this.apiToken}`,"Content-Type":"application/json"}})).data.data;return{id:a.swap_id,hash:a.tx_hash,status:"pending",fromToken:a.from_token,toToken:a.to_token,fromAmount:a.from_amount,toAmount:a.to_amount,timestamp:Date.now(),confirmations:0}}catch(s){throw console.error("Failed to submit PSBT:",s),new Error("Failed to submit swap transaction")}}async getTransactionStatus(e){try{const s=(await T.get(`${this.baseUrl}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}/brc20swap/status/${e}`)).data.data;return{id:e,hash:s.tx_hash,status:s.status,fromToken:s.from_token,toToken:s.to_token,fromAmount:s.from_amount,toAmount:s.to_amount,timestamp:s.timestamp,confirmations:s.confirmations||0,blockHeight:s.block_height}}catch(r){throw console.error("Failed to get transaction status:",r),new Error("Failed to get transaction status")}}async getSwapHistory(e){try{return((await T.get(`${this.baseUrl}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}/brc20swap/history/${e}`)).data.data||[]).map(a=>({id:a.swap_id,hash:a.tx_hash,status:a.status,fromToken:a.from_token,toToken:a.to_token,fromAmount:a.from_amount,toAmount:a.to_amount,timestamp:a.timestamp,confirmations:a.confirmations||0,blockHeight:a.block_height}))}catch(r){return console.error("Failed to get swap history:",r),[]}}async getOptimalFeeRate(){try{return(await T.get(`${this.baseUrl}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}/fee/estimate`)).data.data.medium||2}catch(e){return console.error("Failed to get fee rate:",e),2}}validateSwapParams(e,r,s,a){if(!e||!r)return{valid:!1,error:"Both tokens must be selected"};if(e===r)return{valid:!1,error:"Cannot swap the same token"};const o=parseFloat(s);return isNaN(o)||o<=0?{valid:!1,error:"Amount must be a positive number"}:a<0||a>50?{valid:!1,error:"Slippage must be between 0% and 50%"}:{valid:!0}}formatTokenAmount(e,r=8){const s=parseFloat(e);return isNaN(s)?"0":s.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:r})}formatAmount(e){const r=parseFloat(e);return r>=1e6?(r/1e6).toFixed(2)+"M":r>=1e3?(r/1e3).toFixed(2)+"K":r.toLocaleString()}calculatePriceImpact(e,r,s){const a=parseFloat(e),o=parseFloat(r),i=parseFloat(s);if(a===0||i===0)return 0;const l=o/a,c=(i-l)/i*100;return Math.abs(c)}async checkPriceDataAvailability(){var r;const e="https://open-api-fractal.unisat.io";console.log("🔍 Checking Fractal Bitcoin Mainnet Price Data Availability..."),console.log("Base URL:",e),console.log("⚠️  READ-ONLY CHECKS - No transactions will be made");try{console.log(`
📊 Checking general market endpoints...`);const s=["/v1/indexer/runes/market","/v1/market/runes","/v1/indexer/runes/listings"];for(const a of s)try{const o=new AbortController,i=setTimeout(()=>o.abort(),5e3),l=await fetch(`${e}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}${a}`,{signal:o.signal,headers:{Accept:"application/json"}});if(clearTimeout(i),l.ok){const c=await l.json();console.log(`✅ ${a} works:`,c)}else console.log(`❌ ${a} failed: ${l.status}`)}catch(o){console.log(`❌ ${a} error:`,o.message)}}catch(s){console.log("❌ General market check failed:",s.message)}try{console.log(`
🎯 Checking specific rune listings for price discovery...`);const s=await this.getAvailableTokens("",5);if(s.length>0)for(const a of s.slice(0,3)){console.log(`
🔍 Checking listings for ${a.tick}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}...`);const o=await this.checkRuneListings(a.runeId,a.tick);o.hasListings?(console.log(`✅ ${a.tick}: Found ${(r=o.listings)==null?void 0:r.length} listings`),console.log(`   Latest price: ${o.latestPrice} FB per token`)):console.log(`❌ ${a.tick}: No active listings found`)}}catch(s){console.log("❌ Failed to check rune listings:",s.message)}console.log(`
🏁 Price discovery check completed!`),console.log("💡 Real price discovery comes from active listings/orders, not market APIs")}async checkRuneListings(e,r){const s="https://open-api-fractal.unisat.io";console.log(`🔍 Checking listings for ${r} (ID: ${e})`);const a=[`/v1/indexer/runes/${e}/listings`,`/v1/indexer/runes/${e}/orders`,`/v1/indexer/runes/${e}/market-orders`,`/v1/market/runes/${e}/listings`,`/v1/market/runes/${e}/orders`,`/v1/indexer/runes/listings?runeId=${e}`,`/v1/indexer/runes/orders?runeId=${e}`,`/v1/indexer/runes/${r}/listings`,`/v1/indexer/runes/${r}/orders`];for(const o of a)try{console.log(`🔍 Testing listings: ${o}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}`);const i=new AbortController,l=setTimeout(()=>i.abort(),5e3),c=await fetch(`${s}${o}`,{signal:i.signal,headers:{Accept:"application/json","Content-Type":"application/json"}});if(clearTimeout(l),c.ok){const u=await c.json();if(console.log(`✅ Listings endpoint works: ${o}`),console.log("Listings data:",u),u.code===0&&u.data){const d=u.data.detail||u.data.list||u.data;if(Array.isArray(d)&&d.length>0){const h=d.filter(f=>f.price&&parseFloat(f.price)>0).map(f=>({price:parseFloat(f.price),amount:f.amount,seller:f.seller,timestamp:f.timestamp,listing:f})).sort((f,v)=>v.timestamp-f.timestamp);if(h.length>0){const f=h[0].price;return console.log(`✅ Found ${h.length} listings for ${r}`),console.log(`Latest price: ${f} FB per token`),{hasListings:!0,listings:h,latestPrice:f}}}}}}catch(i){console.log(`❌ ${o} failed:`,i.message);continue}return console.log(`❌ No listings found for ${r}`),{hasListings:!1}}async checkMarketOverview(){var r,s,a;const e="https://open-api-fractal.unisat.io";try{console.log("📊 Checking market overview availability...");const o=await T.get(`${e}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}/v1/indexer/runes/market`,{timeout:1e4,headers:{Accept:"application/json","Content-Type":"application/json"}});return o.data&&o.data.code===0?(console.log("✅ Market overview available:",o.data.data),{available:!0,data:o.data.data}):(console.log("❌ Market overview not available:",o.data),{available:!1})}catch(o){return console.log("❌ Market overview error:",(r=o.response)==null?void 0:r.status,((a=(s=o.response)==null?void 0:s.data)==null?void 0:a.message)||o.message),{available:!1}}}async getRuneInfo(e){var s,a;const r="https://open-api-fractal.unisat.io";try{console.log(`🔍 Fetching rune info for: ${e}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}`);const o=await T.get(`${r}/v1/indexer/runes/${e}/info`,{timeout:15e3,headers:{Accept:"application/json","Content-Type":"application/json"}});return o.data.code===0?(console.log(`✅ Rune info retrieved for ${e}:`,o.data.data),{success:!0,data:o.data.data}):(console.log(`❌ Failed to get rune info for ${e}:`,o.data.msg),{success:!1,data:{},error:o.data.msg||"Failed to fetch rune info"})}catch(o){return console.error(`❌ Error fetching rune info for ${e}:`,o.message),{success:!1,data:{},error:((a=(s=o.response)==null?void 0:s.data)==null?void 0:a.msg)||o.message||"Network error"}}}async getAddressRunes(e,r=0,s=16){var o,i;const a="https://open-api-fractal.unisat.io";try{console.log(`🔍 Fetching runes for address: ${e}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}`);const l=await T.get(`${a}/v1/indexer/address/${e}/runes`,{params:{start:r,limit:s},timeout:15e3,headers:{Accept:"application/json","Content-Type":"application/json"}});return l.data.code===0?(console.log(`✅ Address runes retrieved for ${e}:`,l.data.data),{success:!0,data:l.data.data}):(console.log(`❌ Failed to get address runes for ${e}:`,l.data.msg),{success:!1,data:{detail:[],total:0},error:l.data.msg||"Failed to fetch address runes"})}catch(l){return console.error(`❌ Error fetching address runes for ${e}:`,l.message),{success:!1,data:{detail:[],total:0},error:((i=(o=l.response)==null?void 0:o.data)==null?void 0:i.msg)||l.message||"Network error"}}}async getUserRuneTokens(e){try{console.log(`🔍 Getting user rune tokens for: ${e}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}`);const r=await this.getAddressRunes(e,0,100);if(r.success&&r.data.detail){const s=[];for(const a of r.data.detail)try{const o=await this.getRuneInfo(a.runeid);if(o.success){const i={tick:o.data.spacedRune||o.data.rune,name:o.data.spacedRune||o.data.rune,symbol:o.data.symbol||"",decimals:o.data.divisibility||0,supply:o.data.supply||"0",holders:parseInt(o.data.holders||"0"),mintable:o.data.mintable||!1,burned:o.data.burned||"0",runeId:o.data.runeid,number:parseInt(o.data.number||"0"),balance:a.amount}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);};s.push(i)}}catch(o){console.warn(`⚠️ Failed to get info for rune ${a.runeid}:`,o),s.push({tick:a.spacedRune||a.rune,name:a.spacedRune||a.rune,symbol:a.symbol||"",decimals:a.divisibility||0,supply:"0",holders:0,mintable:!1,burned:"0",runeId:a.runeid,balance:a.amount})}return console.log(`✅ Retrieved ${s.length} rune tokens for user`),{success:!0,data:s}}else return{success:!1,data:[],error:r.error||"Failed to fetch user runes"}}catch(r){return console.error("❌ Error getting user rune tokens:",r.message),{success:!1,data:[],error:r.message||"Network error"}}}async searchRunesByName(e){try{console.log(`🔍 Searching runes for: "${e}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}"`);const s=(await this.getAvailableTokens(e,200)).filter(a=>a.tick.toLowerCase().includes(e.toLowerCase())||a.name.toLowerCase().includes(e.toLowerCase())||a.symbol.toLowerCase().includes(e.toLowerCase()));return console.log(`✅ Found ${s.length} matching runes`),{success:!0,data:s}}catch(r){return console.error("❌ Error searching runes:",r.message),{success:!1,data:[],error:r.message||"Search failed"}}}convertRuneInfoToToken(e){return{tick:e.spacedRune||e.rune,name:e.spacedRune||e.rune,symbol:e.symbol||"",decimals:e.divisibility||0,supply:e.supply||"0",holders:parseInt(e.holders||"0"),mintable:e.mintable||!1,burned:e.burned||"0",runeId:e.runeid,number:parseInt(e.number||"0")}}async getSafeUTXOsForPSBT(e){var s,a;const r="https://open-api-fractal.unisat.io";try{console.log("🛡️ Getting SAFE UTXOs for Fractal Bitcoin PSBT construction"),console.log(`📍 Address: ${e}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}`),console.log("⚠️ CRITICAL: Using available-utxo-data endpoint to prevent asset burning!");const o=await T.get(`${r}/v1/indexer/address/${e}/available-utxo-data`,{timeout:15e3,headers:{Accept:"application/json","Content-Type":"application/json"}});if(o.data.code===0){const i=o.data.data.utxo||[];return console.log(`✅ Safe UTXOs retrieved: ${i.length}`),console.log(`📊 Total available satoshis: ${i.reduce((l,c)=>l+c.satoshi,0)}`),i.length>0&&(console.log("🔍 Sample safe UTXOs:"),i.slice(0,3).forEach((l,c)=>{console.log(`  ${c+1}. ${l.txid}:${l.vout} - ${l.satoshi} sats (inscriptions: ${l.inscriptionsCount})`)})),i.length===0?(console.warn("⚠️ WARNING: No safe UTXOs available for spending!"),{success:!1,data:[],error:"No safe UTXOs available - all UTXOs contain assets that would be burned"}):{success:!0,data:i}}else return console.error(`❌ Failed to get safe UTXOs: ${o.data.msg}`),{success:!1,data:[],error:o.data.msg||"Failed to fetch safe UTXOs"}}catch(o){return console.error("❌ Error fetching safe UTXOs:",o.message),{success:!1,data:[],error:((a=(s=o.response)==null?void 0:s.data)==null?void 0:a.msg)||o.message||"Network error"}}}async createSafePSBT(e){try{console.log("🛡️ Creating SAFE PSBT with mandatory asset protection..."),console.log(`📍 Request: ${e.amount}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);} ${e.token} from ${e.address}`);const r=await this.getSafeUTXOsForPSBT(e.address);if(!r.success)throw new Error(`Cannot create PSBT: ${r.error}`);if(r.data.length===0)throw new Error("Cannot create PSBT: No safe UTXOs available - all UTXOs contain assets!");const s=r.data.reduce((l,c)=>l+c.satoshi,0);console.log(`💰 Total safe balance: ${s} satoshis`);const a={...e,availableUtxos:r.data.map(l=>({txid:l.txid,vout:l.vout,value:l.satoshi,scriptPk:l.scriptPk}))},i=(await T.post(`${this.baseUrl}/brc20swap/psbt`,a)).data.data;return console.log("✅ Safe PSBT created successfully"),console.log(`🔒 PSBT expires at: ${new Date(Date.now()+"60000")}`),{psbt:i.psbt,nonce:i.nonce,expiresAt:Date.now()+"60000"}}catch(r){throw console.error("❌ Safe PSBT creation failed:",r.message),new Error(`Failed to create safe PSBT: ${r.message}`)}}async checkRunePriceData(e){try{console.log("🎯 Checking individual rune price data...");const r=await this.getAvailableTokens("",5);if(r.length===0){console.log("❌ No tokens available to check");return}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}for(const s of r.slice(0,3)){console.log(`
🔍 Checking listings for ${s.tick}...`),console.log(`🔍 Checking listings for ${s.tick} (ID: ${s.runeId})`);const a=[`/v1/indexer/runes/${s.runeId}/listings`,`/v1/indexer/runes/${s.runeId}/orders`,`/v1/indexer/runes/${s.runeId}/market-orders`,`/v1/market/runes/${s.runeId}/listings`,`/v1/market/runes/${s.runeId}/orders`,`/v1/indexer/runes/listings?runeId=${s.runeId}`,`/v1/indexer/runes/orders?runeId=${s.runeId}`,`/v1/indexer/runes/${encodeURIComponent(s.tick)}/listings`,`/v1/indexer/runes/${encodeURIComponent(s.tick)}/orders`];let o=!1;for(const i of a)try{console.log(`🔍 Testing listings: ${i}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}`);const c=await T.get(`https://open-api-fractal.unisat.io${i}`,{timeout:1e4,headers:{Accept:"application/json","Content-Type":"application/json"}});if(c.data.code===0&&c.data.data){console.log(`✅ ${i} success:`,c.data.data),o=!0;break}else console.log(`❌ ${i} failed: ${c.data.msg||"No data"}`)}catch(l){console.log(`❌ ${i} failed: ${l.message}`)}o||(console.log(`❌ No listings found for ${s.tick}`),console.log(`❌ ${s.tick}: No active listings found`))}console.log(`
🏁 Price discovery check completed!`),console.log("💡 Real price discovery comes from active listings/orders, not market APIs")}catch(r){console.error("❌ Error during check:",r.message)}}}const oe=new Ca,Ra=({transactions:n,onTransactionUpdate:e})=>{const[r,s]=g.useState(!1);g.useEffect(()=>{const u=setInterval(async()=>{if(n.length!==0){s(!0);try{for(const d of n)if(d.status==="pending")try{const h=await oe.getTransactionStatus(d.id);h.status!==d.status&&e(h)}catch(h){console.error(`Failed to update transaction ${d.id}:`,h)}}finally{s(!1)}}},1e4);return()=>clearInterval(u)},[n,e]);const a=c=>{switch(c){case"pending":return t.jsx("div",{className:"w-4 h-4 border-2 border-yellow-300 border-t-yellow-600 rounded-full animate-spin"});case"confirmed":return t.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})});case"failed":return t.jsx("svg",{className:"w-4 h-4 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})});default:return null}},o=c=>{switch(c){case"pending":return"Pending";case"confirmed":return"Confirmed";case"failed":return"Failed";default:return"Unknown"}},i=c=>new Date(c).toLocaleTimeString(),l=(c,u)=>{const d=parseFloat(c);return isNaN(d)?`0 ${u}`:u==="BTC"?`${d.toFixed(8)} BTC`:`${d.toLocaleString()} ${u}`};return n.length===0?t.jsxs("div",{className:"fractal-card",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Transaction Monitor"}),t.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[t.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),t.jsx("p",{children:"No active transactions"}),t.jsx("p",{className:"text-sm mt-1",children:"Your swap transactions will appear here"})]})]}):t.jsxs("div",{className:"fractal-card",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Transaction Monitor"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[r&&t.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-fractal-orange rounded-full animate-spin"}),t.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[n.length," active"]})]})]}),t.jsx("div",{className:"space-y-4",children:n.map(c=>t.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[a(c.status),t.jsx("span",{className:`text-sm font-medium ${c.status==="pending"?"tx-pending":c.status==="confirmed"?"tx-confirmed":"tx-failed"}`,children:o(c.status)})]}),t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:i(c.timestamp)})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"From:"}),t.jsx("span",{className:"font-mono",children:l(c.fromAmount,c.fromToken)})]}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"To:"}),t.jsx("span",{className:"font-mono",children:l(c.toAmount,c.toToken)})]}),c.confirmations>0&&t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Confirmations:"}),t.jsxs("span",{className:"font-mono",children:[c.confirmations,"/6"]})]})]}),c.hash&&t.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Transaction Hash:"}),t.jsxs("a",{href:`https://explorer-fractal-testnet.unisat.io/tx/${c.hash}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-fractal-orange hover:underline font-mono",children:[c.hash.slice(0,8),"...",c.hash.slice(-8)]})]})}),c.status==="pending"&&t.jsxs("div",{className:"mt-3",children:[t.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:t.jsx("div",{className:"bg-fractal-orange h-2 rounded-full animate-pulse",style:{width:"30%"}})}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Waiting for confirmation..."})]}),c.status==="confirmed"&&c.blockHeight&&t.jsxs("div",{className:"mt-3 flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-block-pulse"}),t.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Block #",c.blockHeight.toLocaleString()]})]})]},c.id))}),t.jsx("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-400 text-center",children:"Updates automatically every 10 seconds"})]})},Aa=()=>{const{account:n}=ae(),[e,r]=g.useState([]),[s,a]=g.useState(!0),[o,i]=g.useState(null);g.useEffect(()=>{(async()=>{if(n){a(!0),i(null);try{const h=await oe.getSwapHistory(n.address);r(h)}catch(h){i("Failed to load swap history"),console.error("Failed to load swap history:",h)}finally{a(!1)}}})()},[n]);const l=d=>{const h="px-2 py-1 rounded-full text-xs font-medium";switch(d){case"pending":return`${h} bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400`;case"confirmed":return`${h} bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400`;case"failed":return`${h} bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400`;default:return`${h} bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400`}},c=d=>{const h=new Date(d);return h.toLocaleDateString()+" "+h.toLocaleTimeString()},u=(d,h)=>{const f=parseFloat(d);return isNaN(f)?`0 ${h}`:h==="BTC"?`${f.toFixed(8)} BTC`:`${f.toLocaleString()} ${h}`};return s?t.jsxs("div",{className:"fractal-card",children:[t.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Swap History"}),t.jsx("div",{className:"space-y-4",children:[...Array(3)].map((d,h)=>t.jsx("div",{className:"animate-pulse",children:t.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-32"}),t.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-24"})]}),t.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-16"})]})},h))})]}):o?t.jsxs("div",{className:"fractal-card",children:[t.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Swap History"}),t.jsxs("div",{className:"text-center py-8",children:[t.jsx("svg",{className:"w-12 h-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("p",{className:"text-red-600 dark:text-red-400",children:o}),t.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-fractal-orange text-white rounded-lg hover:bg-opacity-90 transition-all",children:"Retry"})]})]}):e.length===0?t.jsxs("div",{className:"fractal-card",children:[t.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Swap History"}),t.jsxs("div",{className:"text-center py-12",children:[t.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No swap history"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Your completed swaps will appear here"}),t.jsx("button",{onClick:()=>window.location.href="/swap",className:"fractal-button",children:"Make Your First Swap"})]})]}):t.jsxs("div",{className:"fractal-card",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold",children:"Swap History"}),t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.length," transaction",e.length!==1?"s":""]})]}),t.jsx("div",{className:"space-y-4",children:e.map(d=>t.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:border-fractal-orange transition-colors",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("svg",{className:"w-4 h-4 text-fractal-orange",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),t.jsxs("span",{className:"font-medium",children:[d.fromToken," → ",d.toToken]})]}),t.jsx("span",{className:l(d.status),children:d.status})]}),t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:c(d.timestamp)})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"From"}),t.jsx("div",{className:"font-mono text-lg",children:u(d.fromAmount,d.fromToken)})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"To"}),t.jsx("div",{className:"font-mono text-lg",children:u(d.toAmount,d.toToken)})]})]}),t.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[d.confirmations>0&&t.jsxs("span",{children:[d.confirmations," confirmation",d.confirmations!==1?"s":""]}),d.blockHeight&&t.jsxs("span",{children:["Block #",d.blockHeight.toLocaleString()]})]}),d.hash&&t.jsxs("a",{href:`https://explorer-fractal-testnet.unisat.io/tx/${d.hash}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-fractal-orange hover:underline text-sm",children:[t.jsx("span",{children:"View Transaction"}),t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]},d.id))}),e.length>=10&&t.jsx("div",{className:"mt-6 text-center",children:t.jsx("button",{className:"px-6 py-2 border border-gray-200 dark:border-gray-700 rounded-lg hover:border-fractal-orange transition-colors",children:"Load More"})})]})};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Pa=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,s)=>s?s.toUpperCase():r.toLowerCase()),Dt=n=>{const e=Pa(n);return e.charAt(0).toUpperCase()+e.slice(1)},Er=(...n)=>n.filter((e,r,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===r).join(" ").trim(),$a=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ea={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=g.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:i,...l},c)=>g.createElement("svg",{ref:c,...Ea,width:e,height:e,stroke:n,strokeWidth:s?Number(r)*24/Number(e):r,className:Er("lucide",a),...!o&&!$a(l)&&{"aria-hidden":"true"},...l},[...i.map(([u,d])=>g.createElement(u,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=(n,e)=>{const r=g.forwardRef(({className:s,...a},o)=>g.createElement(Ba,{ref:o,iconNode:e,className:Er(`lucide-${Fa(Dt(n))}`,`lucide-${n}`,s),...a}));return r.displayName=Dt(n),r};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],La=ye("bug",Ta);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ia=ye("circle-check-big",Oa);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],zt=ye("copy",Ma);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Ua=ye("external-link",_a);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Wa=ye("mail",qa),Da=()=>{const{isConnected:n,account:e}=ae(),[r,s]=g.useState(!1),a="a92633695@gmail.com",o=h=>{const[f,v]=h.split("@");return`${"*".repeat(f.length)}@${v}`},i=h=>{if(!h||h.length<20)return h;const f=h.slice(0,10),v=h.slice(-10);return`${f}${"*".repeat(h.length-20)}${v}`},l="Bug Report - Fractal Bitcoin Swap Platform",c=`Hi Support Team,

I found an issue on the Fractal Bitcoin Swap Platform.

Connected Wallet: ${(e==null?void 0:e.address)||"Not connected"}
Platform URL: ${window.location.href}
Browser: ${navigator.userAgent}
Timestamp: ${new Date().toISOString()}

Issue Description:
[Please describe the issue you encountered]

Steps to Reproduce:
1. [Step 1]
2. [Step 2]
3. [Step 3]

Expected Behavior:
[What you expected to happen]

Actual Behavior:
[What actually happened]

Additional Information:
[Any other relevant details]

Best regards`,u=`mailto:${a}?subject=${encodeURIComponent(l)}&body=${encodeURIComponent(c)}`,d=async()=>{try{await navigator.clipboard.writeText(a),s(!0),setTimeout(()=>s(!1),2e3)}catch(h){console.error("Failed to copy email:",h)}};return t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg border-l-4 border-red-500",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:t.jsx(La,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Found a bug? Squash it here! 🐛"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Report issues directly via email"})]})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Wa,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Contact our support team:"})]}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-600",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"font-mono text-lg text-blue-600 dark:text-blue-400",children:o(a)}),t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"(Privacy protected)"})]}),t.jsx("button",{onClick:d,className:"flex items-center space-x-1 px-3 py-1 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md transition-colors",title:"Copy full email address",children:r?t.jsxs(t.Fragment,{children:[t.jsx(Ia,{className:"w-4 h-4 text-green-600"}),t.jsx("span",{className:"text-sm text-green-600",children:"Copied!"})]}):t.jsxs(t.Fragment,{children:[t.jsx(zt,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}),t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Copy"})]})})]})}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[t.jsxs("a",{href:u,className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center space-x-2",children:[t.jsx(Ua,{className:"w-4 h-4"}),t.jsx("span",{children:"Open Email Client"})]}),t.jsxs("button",{onClick:d,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center space-x-2",children:[t.jsx(zt,{className:"w-4 h-4"}),t.jsx("span",{children:"Copy Email Address"})]})]}),t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-2",children:[t.jsx("p",{className:"font-medium",children:"How to report an issue:"}),t.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[t.jsx("li",{children:'Click "Open Email Client" to compose an email with pre-filled template (full email revealed)'}),t.jsx("li",{children:"Or copy the email address (full address copied) and compose manually in your preferred email app"}),t.jsx("li",{children:"Describe the issue, steps to reproduce, and expected behavior"}),t.jsx("li",{children:"Send the email and we'll get back to you soon!"})]}),t.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-2 mt-3",children:t.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:"🔒 Privacy Note: Email address is masked for security. Full address is only revealed when copying or composing emails."})})]}),n&&(e==null?void 0:e.address)&&t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),t.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Wallet Connected"})]}),t.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:["Your wallet address will be included in the email template: ",i(e.address)]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"(Full address included in email composition only)"})]}),!n&&t.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),t.jsx("span",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Wallet Not Connected"})]}),t.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-1",children:"Connect your wallet for better issue tracking and support"})]})]})]})})},we=()=>{const{isConnected:n,account:e}=ae(),[r,s]=g.useState("trade"),[a,o]=g.useState([]),[i,l]=g.useState(""),[c,u]=g.useState(!1),[d,h]=g.useState(null),[f,v]=g.useState(!1),[x,m]=g.useState(!1);g.useEffect(()=>{const S=C=>{console.error("Page error:",C),v(!0)};return window.addEventListener("error",S),()=>window.removeEventListener("error",S)},[]),g.useEffect(()=>{console.log("SwapPage render - isConnected:",n,"account:",e)},[n,e]),g.useEffect(()=>{(async()=>{if(!n||!(e!=null&&e.address)){m(!1);return}try{const C=localStorage.getItem(`lastReplyCheck_${e.address}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}`),N=Date.now();!1&&(!C||N-parseInt(C)>864e5)}catch(C){console.error("Failed to check for replies:",C)}})()},[n,e==null?void 0:e.address]);const y=S=>{o(C=>C.map(N=>N.id===S.id?S:N).filter(N=>N.status==="pending"))};g.useEffect(()=>{if(d){const S=setTimeout(()=>h(null),5e3);return()=>clearTimeout(S)}},[d]);const A=async()=>{u(!0),l(`🔍 Checking Fractal Bitcoin Mainnet Price Data Availability...
⚠️  READ-ONLY CHECKS - No transactions will be made

`);const S=console.log,C=[];console.log=(...N)=>{const $=N.map(b=>typeof b=="object"?JSON.stringify(b,null,2):String(b)).join(" ");C.push($),S(...N)};try{await oe.checkPriceDataAvailability();const N=await oe.checkMarketOverview();N.available?(C.push(`
📊 Market Overview: AVAILABLE`),C.push(JSON.stringify(N.data,null,2))):C.push(`
📊 Market Overview: NOT AVAILABLE`);const $=await oe.getAvailableTokens("",3);if($.length>0){C.push(`
🎯 Checking individual rune price data...`);for(const b of $.slice(0,3))try{await oe.checkRunePriceData(b.runeId),C.push(`✅ ${b.tick}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}: Price data check completed`)}catch(R){C.push(`❌ ${b.tick}: Price data check failed - ${R}`)}}C.push(`
🏁 ASSESSMENT:`),C.push("If no price endpoints are available above, we need to build our own internal liquidity system")}catch(N){C.push(`❌ Error during check: ${N.message}`)}console.log=S,l(C.join(`
`)),u(!1)},P=async()=>{if(!(e!=null&&e.address)){alert("Please connect your wallet first");return}u(!0),l(`🔧 Debugging Runes Balance API...

`);const S=console.log,C=[];console.log=(...N)=>{const $=N.map(b=>typeof b=="object"?JSON.stringify(b,null,2):String(b)).join(" ");C.push($),S(...N)};try{const{walletService:N}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}=await dt(async()=>{const{walletService:R}=await Promise.resolve().then(()=>Ms);return{walletService:R}},void 0);await N.debugRunesBalanceAPI(e.address),C.push(`
🔄 Attempting to fetch Runes balances...`);const $=await N.getRunesBalances(e.address);C.push("Final balances result:",JSON.stringify($,null,2)),Object.keys($).some(R=>R.toLowerCase().includes("black")||R.toLowerCase().includes("myth"))?C.push("🎯 Found black•myth•sun•wu•kong in balances!"):C.push("❌ black•myth•sun•wu•kong not found in balances")}catch(N){C.push(`❌ Error during debug: ${N.message}`)}console.log=S,l(C.join(`
`)),u(!1)};return f?t.jsx("div",{className:"max-w-4xl mx-auto",children:t.jsxs("div",{className:"fractal-card text-center",children:[t.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-4",children:"Something went wrong"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"There was an error loading the trading interface."}),t.jsx("button",{onClick:()=>{v(!1),window.location.reload()},className:"bg-fractal-orange text-white px-4 py-2 rounded-lg hover:bg-orange-600",children:"Reload Page"})]})}):n?t.jsxs("div",{className:"max-w-6xl mx-auto",children:[d&&t.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg ${d.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{children:d.message}),t.jsx("button",{onClick:()=>h(null),className:"ml-2 text-white hover:text-gray-200",children:"×"})]})}),t.jsxs("div",{className:"mb-8 text-center",children:[t.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:"Fractal Bitcoin Trading Platform"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Smart Price Routing • AMM Pools & Orderbook • Batch Optimization"})]}),t.jsxs("div",{className:"flex justify-center space-x-4 mb-8",children:[t.jsx("button",{onClick:()=>s("trade"),className:`px-6 py-3 rounded-lg font-medium transition-all ${r==="trade"?"bg-blue-600 text-white":"text-gray-600 dark:text-gray-400 hover:text-blue-600"}`,children:"💱 Trade"}),t.jsx("button",{onClick:()=>s("liquidity"),className:`px-6 py-3 rounded-lg font-medium transition-all ${r==="liquidity"?"bg-green-600 text-white":"text-gray-600 dark:text-gray-400 hover:text-green-600"}`,children:"💧 Provide liquidity"}),t.jsx("button",{onClick:()=>s("history"),className:`px-6 py-3 rounded-lg font-medium transition-all ${r==="history"?"bg-fractal-orange text-white":"text-gray-600 dark:text-gray-400 hover:text-fractal-orange"}`,children:"📊 My Orders"}),t.jsxs("button",{onClick:()=>{s("support"),m(!1),e!=null&&e.address&&localStorage.setItem(`lastReplyCheck_${e.address}`,Date.now().toString())},className:`px-6 py-3 rounded-lg font-medium transition-all relative ${r==="support"?"bg-red-600 text-white":"text-gray-600 dark:text-gray-400 hover:text-red-600"}`,children:["🐛 Support",x&&t.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full animate-pulse"}),x&&t.jsx("span",{className:"absolute -top-2 -right-2 bg-blue-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold",children:"1"})]})]}),t.jsxs("div",{className:"max-w-4xl mx-auto",children:[r==="trade"&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsx("div",{className:"lg:col-span-2",children:t.jsx(Ks,{})}),t.jsx("div",{children:t.jsx(Ra,{transactions:a,onTransactionUpdate:y})})]}),r==="liquidity"&&t.jsx(Xs,{}),r==="history"&&t.jsx(Aa,{}),r==="support"&&t.jsx(Da,{})]}),t.jsxs("div",{className:"mt-12 max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"fractal-card cursor-pointer hover:shadow-lg transition-shadow duration-200 border-2 border-transparent hover:border-red-200 dark:hover:border-red-800",onClick:()=>s("support"),children:[t.jsxs("h3",{className:"font-semibold mb-2 flex items-center",children:[t.jsx("svg",{className:"w-5 h-5 text-red-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Found a bug? Squash it here.",t.jsx("svg",{className:"w-4 h-4 text-red-600 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Help us improve the platform by reporting issues. Click here to submit bug reports and feature requests."}),t.jsx("div",{className:"mt-3 text-xs text-red-600 dark:text-red-400 font-medium",children:"Click to open issue reporter →"})]}),t.jsxs("div",{className:"fractal-card",children:[t.jsxs("h3",{className:"font-semibold mb-2 flex items-center",children:[t.jsx("svg",{className:"w-5 h-5 text-fractal-orange mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Smart Batch Splitting"]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Batches are split on-demand during trades. Remainder is auto-relisted to maintain liquidity."})]}),t.jsxs("div",{className:"fractal-card",children:[t.jsxs("h3",{className:"font-semibold mb-2 flex items-center",children:[t.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),"Fee Optimization"]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Get discounts for buying full batches. Smart suggestions help you save on transaction fees."})]})]})]}):t.jsx("div",{className:"max-w-4xl mx-auto",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 bg-fractal-gradient rounded-full flex items-center justify-center mx-auto mb-6",children:t.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Connect Your Wallet"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8 max-w-md mx-auto",children:"To start swapping Runes tokens and FB on Fractal Bitcoin, please connect your wallet using the button in the header."}),t.jsxs("div",{className:"fractal-card max-w-md mx-auto",children:[t.jsx("h3",{className:"font-semibold mb-4",children:"Supported Wallets"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-white rounded-lg flex items-center justify-center border border-gray-200 dark:border-gray-700",children:t.jsx("img",{src:"unisat-logo.png",alt:"UniSat Wallet",className:"w-6 h-6 object-contain",onError:S=>{console.log("UniSat logo failed to load"),S.currentTarget.style.display="none"}})}),t.jsx("span",{children:"UniSat Wallet"})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-white rounded-lg flex items-center justify-center border border-gray-200 dark:border-gray-700",children:t.jsx("img",{src:"okx-logo.png",alt:"OKX Wallet",className:"w-6 h-6 object-contain",onError:S=>{console.log("OKX logo failed to load"),S.currentTarget.style.display="none"}})}),t.jsx("span",{children:"OKX Wallet"})]})]})]}),t.jsxs("div",{className:"fractal-card max-w-2xl mx-auto mt-8",children:[t.jsx("h3",{className:"font-semibold mb-4 text-fractal-orange",children:"🔍 Fractal Bitcoin Mainnet API Testing"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Check price discovery APIs and debug Runes balance fetching"}),t.jsxs("div",{className:"flex gap-2 mb-4",children:[t.jsx("button",{onClick:A,disabled:c,className:"bg-fractal-orange text-white px-4 py-2 rounded-lg hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"🔄 Checking...":"🔍 Check Price APIs"}),t.jsx("button",{onClick:P,disabled:c,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"🔄 Debugging...":"🔧 Debug Runes Balances"})]}),i&&t.jsxs("div",{className:"mt-4 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg text-left",children:[t.jsx("h4",{className:"font-semibold mb-2",children:"API Test Results:"}),t.jsx("pre",{className:"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap overflow-auto max-h-96",children:i})]})]})]})})};let rt=null,st=null,nt=null;try{rt=require("./components/DebugPanel").default}catch(n){console.warn("⚠️ DebugPanel not available:",n.message)}try{st=require("./components/NotificationSystem").default}catch(n){console.warn("⚠️ NotificationSystem not available:",n.message)}try{nt=require("./components/SecurityVerificationBadge").default}catch(n){console.warn("⚠️ SecurityVerificationBadge not available:",n.message)}let at=null,ot=null,fe=null;try{at=require("./services/pageIntegrityService").default}catch(n){console.warn("⚠️ PageIntegrityService not available:",n.message)}try{ot=require("./services/securityMonitorService").default}catch(n){console.warn("⚠️ SecurityMonitorService not available:",n.message)}try{const{defaultLiquidityPool:n}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);}=require("./services/liquidityPoolOrchestrator");fe=n}catch(n){console.warn("⚠️ Liquidity Pool initialization deferred:",n.message)}const za=()=>{const[n,e]=g.useState(!0),[r,s]=g.useState(!1),[a,o]=g.useState(null);let i=[],l=()=>{};try{const c=Us();i=c.notifications,l=c.removeNotification}catch(err){console.warn("⚠️ Notification context not available")}return g.useEffect(()=>{(async()=>{var u,d;try{console.log("🔄 Starting Fractal Bitcoin Swap Platform...");const h=setTimeout(()=>{console.warn("⚠️ Initialization taking too long, proceeding anyway..."),e(!1)}catch(error){console.log("[TRACE] auto-added catch in index-5JuZi7QJ.js", error);},1e4);if(at)try{console.log("🔐 Initializing Security Services..."),await at.getInstance().initialize(),console.log("✅ Page integrity initialized")}catch(f){console.warn("⚠️ Page integrity initialization failed:",f)}if(ot)try{ot.getInstance().startMonitoring(),console.log("✅ Security monitoring started")}catch(f){console.warn("⚠️ Security monitoring failed:",f)}if(s(!0),fe)try{console.log("🔄 Initializing AMM Liquidity Provision...");const f=((d=(u=fe.getAllAMMPools)==null?void 0:u.call(fe))==null?void 0:d.length)||0;console.log("📊 Available AMM Pools:",f)}catch(f){console.warn("⚠️ Liquidity pool initialization failed:",f)}clearTimeout(h),setTimeout(()=>{console.log("✅ Platform ready!"),e(!1)},1e3)}catch(h){console.error("❌ App initialization error:",h),o(h instanceof Error?h.message:"Unknown initialization error"),e(!1)}})()},[]),a?t.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Initialization Error"}),t.jsx("p",{className:"text-red-500 mb-4",children:a}),t.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Reload Page"})]})}):n?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-blue-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),t.jsx("p",{className:"font-mono text-gray-600 text-lg",children:"Initializing Fractal Bitcoin Swap Platform..."}),r&&t.jsx("p",{className:"font-mono text-green-600 text-sm mt-2",children:"🔐 Security verification complete"})]})}):t.jsxs(t.Fragment,{children:[nt&&t.jsx("div",{className:"fixed top-4 right-4 z-50",children:t.jsx(nt,{showDetails:!1})}),t.jsxs(Ts,{basename:"/swap",children:[t.jsx(zs,{children:t.jsxs($s,{children:[t.jsx(me,{path:"/",element:t.jsx(we,{})}),t.jsx(me,{path:"/swap",element:t.jsx(we,{})}),t.jsx(me,{path:"/c",element:t.jsx(we,{})}),t.jsx(me,{path:"*",element:t.jsx(we,{})})]})}),rt&&t.jsx(rt,{})]}),st&&t.jsx(st,{notifications:i,onRemove:l})]})};function Ha(){return t.jsx(St,{fallback:t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50",children:t.jsxs("div",{className:"text-center p-responsive",children:[t.jsxs("div",{className:"flex items-center justify-center mb-4",children:[t.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden mr-3",children:t.jsx("img",{src:"fbr.png",alt:"Fractal Bitcoin Runes",className:"w-full h-full object-contain"})}),t.jsx("h1",{className:"text-responsive-lg font-bold text-red-600",children:"Application Error"})]}),t.jsx("p",{className:"text-responsive-sm text-red-500 mb-4",children:"The application encountered an unexpected error."}),t.jsx("button",{onClick:()=>window.location.reload(),className:"fractal-button touch-button",children:"Reload Application"})]})}),children:t.jsx(Ls,{children:t.jsx(Os,{children:t.jsx(_s,{children:t.jsx(qs,{children:t.jsx(St,{children:t.jsx(za,{})})})})})})})}window.Buffer=Ur.Buffer;He.createRoot(document.getElementById("root")).render(t.jsx(_r.StrictMode,{children:t.jsx(Ha,{})}));export{D as w};
